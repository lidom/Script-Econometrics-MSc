<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>1.7 Tidyverse | Econometrics (M.Sc.)</title>
  <meta name="description" content="1.7 Tidyverse | Econometrics (M.Sc.)" />
  <meta name="generator" content="bookdown 0.24 and GitBook 2.6.7" />

  <meta property="og:title" content="1.7 Tidyverse | Econometrics (M.Sc.)" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="/images/mylogo.png" />
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="1.7 Tidyverse | Econometrics (M.Sc.)" />
  
  
  <meta name="twitter:image" content="/images/mylogo.png" />

<meta name="author" content="Prof. Dr. Dominik Liebl" />


<meta name="date" content="2022-09-06" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="r-packages.html"/>
<link rel="next" href="further-links.html"/>
<script src="libs/header-attrs-2.11/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="stylesheet" href="toc.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="index.html#preface" id="toc-preface">Preface</a>
<ul>
<li><a href="index.html#organization-of-the-course" id="toc-organization-of-the-course">Organization of the Course</a></li>
<li><a href="index.html#literature" id="toc-literature">Literature</a></li>
</ul></li>
<li><a href="introduction-to-r.html#introduction-to-r" id="toc-introduction-to-r"><span class="toc-section-number">1</span> Introduction to R</a>
<ul>
<li><a href="short-glossary.html#short-glossary" id="toc-short-glossary"><span class="toc-section-number">1.1</span> Short Glossary</a></li>
<li><a href="first-steps.html#first-steps" id="toc-first-steps"><span class="toc-section-number">1.2</span> First Steps</a></li>
<li><a href="further-data-objects.html#further-data-objects" id="toc-further-data-objects"><span class="toc-section-number">1.3</span> Further Data Objects</a></li>
<li><a href="simple-regression-analysis-using-r.html#simple-regression-analysis-using-r" id="toc-simple-regression-analysis-using-r"><span class="toc-section-number">1.4</span> Simple Regression Analysis using R</a></li>
<li><a href="programming-in-r.html#programming-in-r" id="toc-programming-in-r"><span class="toc-section-number">1.5</span> Programming in R</a></li>
<li><a href="r-packages.html#r-packages" id="toc-r-packages"><span class="toc-section-number">1.6</span> R-packages</a></li>
<li><a href="tidyverse.html#tidyverse" id="toc-tidyverse"><span class="toc-section-number">1.7</span> Tidyverse</a>
<ul>
<li><a href="tidyverse.html#tidyverse-plotting-basics" id="toc-tidyverse-plotting-basics"><span class="toc-section-number">1.7.1</span> Tidyverse: Plotting Basics</a></li>
<li><a href="tidyverse.html#tidyverse-data-wrangling-basics" id="toc-tidyverse-data-wrangling-basics"><span class="toc-section-number">1.7.2</span> Tidyverse: Data Wrangling Basics</a></li>
<li><a href="tidyverse.html#the-pipe-operator" id="toc-the-pipe-operator"><span class="toc-section-number">1.7.3</span> The pipe operator <code>%&gt;%</code></a></li>
<li><a href="tidyverse.html#the-group_by-function" id="toc-the-group_by-function"><span class="toc-section-number">1.7.4</span> The <code>group_by()</code> function</a></li>
</ul></li>
<li><a href="further-links.html#further-links" id="toc-further-links"><span class="toc-section-number">1.8</span> Further Links</a>
<ul>
<li><a href="further-links.html#further-r-intros" id="toc-further-r-intros"><span class="toc-section-number">1.8.1</span> Further R-Intros</a></li>
<li><a href="further-links.html#version-control-gitgithub" id="toc-version-control-gitgithub"><span class="toc-section-number">1.8.2</span> Version Control (Git/GitHub)</a></li>
<li><a href="further-links.html#r-ladies" id="toc-r-ladies"><span class="toc-section-number">1.8.3</span> R-Ladies</a></li>
</ul></li>
</ul></li>
<li><a href="ReviewStats.html#ReviewStats" id="toc-ReviewStats"><span class="toc-section-number">2</span> Review: Probability and Statistics</a>
<ul>
<li><a href="probability-theory.html#probability-theory" id="toc-probability-theory"><span class="toc-section-number">2.1</span> Probability Theory</a>
<ul>
<li><a href="probability-theory.html#sample-spaces-and-elementary-events" id="toc-sample-spaces-and-elementary-events"><span class="toc-section-number">2.1.1</span> Sample Spaces and (Elementary) Events</a></li>
<li><a href="probability-theory.html#probability" id="toc-probability"><span class="toc-section-number">2.1.2</span> Probability</a></li>
<li><a href="probability-theory.html#independent-events" id="toc-independent-events"><span class="toc-section-number">2.1.3</span> Independent Events</a></li>
<li><a href="probability-theory.html#conditional-probability" id="toc-conditional-probability"><span class="toc-section-number">2.1.4</span> Conditional Probability</a></li>
</ul></li>
<li><a href="random-variables.html#random-variables" id="toc-random-variables"><span class="toc-section-number">2.2</span> Random Variables</a>
<ul>
<li><a href="random-variables.html#univariate-distribution-and-probability-functions" id="toc-univariate-distribution-and-probability-functions"><span class="toc-section-number">2.2.1</span> Univariate Distribution and Probability Functions</a></li>
<li><a href="random-variables.html#multivariate-distribution-and-probability-functions" id="toc-multivariate-distribution-and-probability-functions"><span class="toc-section-number">2.2.2</span> Multivariate Distribution and Probability Functions</a></li>
<li><a href="random-variables.html#means-and-moments" id="toc-means-and-moments"><span class="toc-section-number">2.2.3</span> Means and Moments</a></li>
<li><a href="random-variables.html#unconditional-means" id="toc-unconditional-means"><span class="toc-section-number">2.2.4</span> Unconditional Means</a></li>
<li><a href="random-variables.html#conditional-means" id="toc-conditional-means"><span class="toc-section-number">2.2.5</span> Conditional Means</a></li>
<li><a href="random-variables.html#means-of-transformed-random-variables-and-moments" id="toc-means-of-transformed-random-variables-and-moments"><span class="toc-section-number">2.2.6</span> Means of Transformed Random Variables and Moments</a></li>
<li><a href="random-variables.html#independent-random-variables" id="toc-independent-random-variables"><span class="toc-section-number">2.2.7</span> Independent Random Variables</a></li>
<li><a href="random-variables.html#i.i.d.-samples" id="toc-i.i.d.-samples"><span class="toc-section-number">2.2.8</span> I.I.D. Samples</a></li>
<li><a href="random-variables.html#some-important-discrete-random-variables" id="toc-some-important-discrete-random-variables"><span class="toc-section-number">2.2.9</span> Some Important Discrete Random Variables</a></li>
<li><a href="random-variables.html#some-important-continuous-random-variables" id="toc-some-important-continuous-random-variables"><span class="toc-section-number">2.2.10</span> Some Important Continuous Random Variables</a></li>
</ul></li>
</ul></li>
<li><a href="ch:MLR.html#ch:MLR" id="toc-ch:MLR"><span class="toc-section-number">3</span> Multiple Linear Regression</a>
<ul>
<li><a href="assumptions.html#assumptions" id="toc-assumptions"><span class="toc-section-number">3.1</span> Assumptions</a>
<ul>
<li><a href="assumptions.html#some-implications-of-the-exogeneity-assumption" id="toc-some-implications-of-the-exogeneity-assumption"><span class="toc-section-number">3.1.1</span> Some Implications of the Exogeneity Assumption</a></li>
</ul></li>
<li><a href="deriving-the-expression-of-the-ols-estimator.html#deriving-the-expression-of-the-ols-estimator" id="toc-deriving-the-expression-of-the-ols-estimator"><span class="toc-section-number">3.2</span> Deriving the Expression of the OLS Estimator</a></li>
<li><a href="some-quantities-of-interest.html#some-quantities-of-interest" id="toc-some-quantities-of-interest"><span class="toc-section-number">3.3</span> Some Quantities of Interest</a></li>
<li><a href="method-of-moments-estimator.html#method-of-moments-estimator" id="toc-method-of-moments-estimator"><span class="toc-section-number">3.4</span> Method of Moments Estimator</a></li>
<li><a href="unbiasedness-of-hatbetax-and-hatbeta.html#unbiasedness-of-hatbetax-and-hatbeta" id="toc-unbiasedness-of-hatbetax-and-hatbeta"><span class="toc-section-number">3.5</span> Unbiasedness of <span class="math inline">\(\hat\beta|X\)</span> and <span class="math inline">\(\hat\beta\)</span></a></li>
<li><a href="ch:VarEstBeta.html#ch:VarEstBeta" id="toc-ch:VarEstBeta"><span class="toc-section-number">3.6</span> Variance and Standard Error of <span class="math inline">\(\hat\beta|X\)</span></a></li>
<li><a href="the-gauss-markov-theorem.html#the-gauss-markov-theorem" id="toc-the-gauss-markov-theorem"><span class="toc-section-number">3.7</span> The Gauss-Markov Theorem</a></li>
<li><a href="practice-real-data.html#practice-real-data" id="toc-practice-real-data"><span class="toc-section-number">3.8</span> Practice: Real Data</a>
<ul>
<li><a href="practice-real-data.html#dummy-variables-contrast-codings-and-interactions" id="toc-dummy-variables-contrast-codings-and-interactions">Dummy Variables, Contrast Codings, and Interactions</a></li>
<li><a href="practice-real-data.html#the-function" id="toc-the-function">The Function </a></li>
</ul></li>
<li><a href="practice-simulation.html#practice-simulation" id="toc-practice-simulation"><span class="toc-section-number">3.9</span> Practice: Simulation</a>
<ul>
<li><a href="practice-simulation.html#behavior-of-the-ols-estimates-for-resampled-data-conditionally-on-x_i" id="toc-behavior-of-the-ols-estimates-for-resampled-data-conditionally-on-x_i"><span class="toc-section-number">3.9.1</span> Behavior of the OLS Estimates for Resampled Data (conditionally on <span class="math inline">\(X_i\)</span>)</a></li>
</ul></li>
</ul></li>
<li><a href="ch:SSINF.html#ch:SSINF" id="toc-ch:SSINF"><span class="toc-section-number">4</span> Small Sample Inference</a>
<ul>
<li><a href="ch:testmultp.html#ch:testmultp" id="toc-ch:testmultp"><span class="toc-section-number">4.1</span> Hypothesis Tests about Multiple Parameters</a>
<ul>
<li><a href="ch:testmultp.html#the-test-statistic-and-its-null-distribution" id="toc-the-test-statistic-and-its-null-distribution"><span class="toc-section-number">4.1.1</span> The Test Statistic and its Null Distribution</a></li>
</ul></li>
<li><a href="ch:testingsinglep.html#ch:testingsinglep" id="toc-ch:testingsinglep"><span class="toc-section-number">4.2</span> Tests about One Parameter</a></li>
<li><a href="testtheory.html#testtheory" id="toc-testtheory"><span class="toc-section-number">4.3</span> Testtheory</a>
<ul>
<li><a href="testtheory.html#significance-level" id="toc-significance-level"><span class="toc-section-number">4.3.1</span> Significance Level</a></li>
<li><a href="testtheory.html#critical-value-for-the-f-test" id="toc-critical-value-for-the-f-test"><span class="toc-section-number">4.3.2</span> Critical Value for the <span class="math inline">\(F\)</span>-Test</a></li>
<li><a href="testtheory.html#critical-values-for-the-t-test" id="toc-critical-values-for-the-t-test"><span class="toc-section-number">4.3.3</span> Critical Value(s) for the <span class="math inline">\(t\)</span>-Test</a></li>
</ul></li>
<li><a href="type-ii-error-and-power.html#type-ii-error-and-power" id="toc-type-ii-error-and-power"><span class="toc-section-number">4.4</span> Type II Error and Power</a></li>
<li><a href="p-value.html#p-value" id="toc-p-value"><span class="toc-section-number">4.5</span> <span class="math inline">\(p\)</span>-Value</a></li>
<li><a href="CIsmallsample.html#CIsmallsample" id="toc-CIsmallsample"><span class="toc-section-number">4.6</span> Confidence Intervals</a></li>
<li><a href="PSSI.html#PSSI" id="toc-PSSI"><span class="toc-section-number">4.7</span> Practice: Small Sample Inference</a>
<ul>
<li><a href="PSSI.html#normally-distributed-hatbetax" id="toc-normally-distributed-hatbetax"><span class="toc-section-number">4.7.1</span> Normally Distributed <span class="math inline">\(\hat\beta|X\)</span></a></li>
<li><a href="PSSI.html#testing-multiple-parameters" id="toc-testing-multiple-parameters"><span class="toc-section-number">4.7.2</span> Testing Multiple Parameters</a></li>
<li><a href="PSSI.html#dualty-of-confidence-intervals-and-hypothesis-tests" id="toc-dualty-of-confidence-intervals-and-hypothesis-tests"><span class="toc-section-number">4.7.3</span> Dualty of Confidence Intervals and Hypothesis Tests</a></li>
</ul></li>
</ul></li>
<li><a href="ch:LSINF.html#ch:LSINF" id="toc-ch:LSINF"><span class="toc-section-number">5</span> Large Sample Inference</a>
<ul>
<li><a href="tools-for-asymptotic-statistics.html#tools-for-asymptotic-statistics" id="toc-tools-for-asymptotic-statistics"><span class="toc-section-number">5.1</span> Tools for Asymptotic Statistics</a>
<ul>
<li><a href="tools-for-asymptotic-statistics.html#modes-of-convergence" id="toc-modes-of-convergence"><span class="toc-section-number">5.1.1</span> Modes of Convergence</a></li>
<li><a href="tools-for-asymptotic-statistics.html#four-important-modes-of-convergence" id="toc-four-important-modes-of-convergence">Four Important Modes of Convergence</a></li>
<li><a href="tools-for-asymptotic-statistics.html#relations-among-modes-of-convergence" id="toc-relations-among-modes-of-convergence">Relations among Modes of Convergence</a></li>
<li><a href="tools-for-asymptotic-statistics.html#continuous-mapping-theorem-cmt" id="toc-continuous-mapping-theorem-cmt"><span class="toc-section-number">5.1.2</span> Continuous Mapping Theorem (CMT)</a></li>
<li><a href="tools-for-asymptotic-statistics.html#slutsky-theorem" id="toc-slutsky-theorem"><span class="toc-section-number">5.1.3</span> Slutsky Theorem</a></li>
<li><a href="tools-for-asymptotic-statistics.html#law-of-large-numbers-lln-and-central-limit-theorem-clt" id="toc-law-of-large-numbers-lln-and-central-limit-theorem-clt"><span class="toc-section-number">5.1.4</span> Law of Large Numbers (LLN) and Central Limit Theorem (CLT)</a></li>
<li><a href="tools-for-asymptotic-statistics.html#estimators-as-a-sequences-of-random-variables" id="toc-estimators-as-a-sequences-of-random-variables"><span class="toc-section-number">5.1.5</span> Estimators as a Sequences of Random Variables</a></li>
</ul></li>
<li><a href="asymptotics-under-the-classic-regression-model.html#asymptotics-under-the-classic-regression-model" id="toc-asymptotics-under-the-classic-regression-model"><span class="toc-section-number">5.2</span> Asymptotics under the Classic Regression Model</a>
<ul>
<li><a href="asymptotics-under-the-classic-regression-model.html#the-case-of-heteroscedasticity" id="toc-the-case-of-heteroscedasticity"><span class="toc-section-number">5.2.1</span> The Case of Heteroscedasticity</a></li>
<li><a href="asymptotics-under-the-classic-regression-model.html#hypothesis-testing-and-confidence-intervals" id="toc-hypothesis-testing-and-confidence-intervals"><span class="toc-section-number">5.2.2</span> Hypothesis Testing and Confidence Intervals</a></li>
</ul></li>
<li><a href="practice-large-sample-inference.html#practice-large-sample-inference" id="toc-practice-large-sample-inference"><span class="toc-section-number">5.3</span> Practice: Large Sample Inference</a>
<ul>
<li><a href="practice-large-sample-inference.html#normally-distributed-hatbeta-for-ntoinfty" id="toc-normally-distributed-hatbeta-for-ntoinfty"><span class="toc-section-number">5.3.1</span> Normally Distributed <span class="math inline">\(\hat\beta\)</span> for <span class="math inline">\(n\to\infty\)</span></a></li>
<li><a href="practice-large-sample-inference.html#testing-multiple-and-single-parameters" id="toc-testing-multiple-and-single-parameters"><span class="toc-section-number">5.3.2</span> Testing Multiple and Single Parameters</a></li>
</ul></li>
</ul></li>
<li><a href="ivr.html#ivr" id="toc-ivr"><span class="toc-section-number">6</span> Instrumental Variables Regression</a>
<ul>
<li><a href="TIVEWASRAASI.html#TIVEWASRAASI" id="toc-TIVEWASRAASI"><span class="toc-section-number">6.1</span> The IV Estimator with a Single Regressor and a Single Instrument</a>
<ul>
<li><a href="TIVEWASRAASI.html#the-two-stage-least-squares-estimator" id="toc-the-two-stage-least-squares-estimator"><span class="toc-section-number">6.1.1</span> The Two-Stage Least Squares Estimator</a></li>
<li><a href="TIVEWASRAASI.html#application-demand-for-cigarettes-12" id="toc-application-demand-for-cigarettes-12"><span class="toc-section-number">6.1.2</span> Application: Demand For Cigarettes (1/2)</a></li>
</ul></li>
<li><a href="TGIVRM.html#TGIVRM" id="toc-TGIVRM"><span class="toc-section-number">6.2</span> The General IV Regression Model</a>
<ul>
<li><a href="TGIVRM.html#application-demand-for-cigarettes-22" id="toc-application-demand-for-cigarettes-22"><span class="toc-section-number">6.2.1</span> Application: Demand for Cigarettes (2/2)</a></li>
</ul></li>
<li><a href="civ.html#civ" id="toc-civ"><span class="toc-section-number">6.3</span> Checking Instrument Validity</a>
<ul>
<li><a href="civ.html#instrument-relevance" id="toc-instrument-relevance"><span class="toc-section-number">6.3.1</span> Instrument Relevance</a></li>
<li><a href="civ.html#instrument-validity" id="toc-instrument-validity"><span class="toc-section-number">6.3.2</span> Instrument Validity</a></li>
</ul></li>
<li><a href="attdfc.html#attdfc" id="toc-attdfc"><span class="toc-section-number">6.4</span> Application to the Demand for Cigarettes</a></li>
</ul></li>
<li><a href="references.html#references" id="toc-references">References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Econometrics (M.Sc.)</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="tidyverse" class="section level2" number="1.7">
<h2><span class="header-section-number">1.7</span> Tidyverse</h2>
<p>The <code>tidyverse</code> package is a collection of packages that lets you import,
manipulate, explore, visualize and model data in a harmonized and consistent way which
helps you to be more productive.</p>
<p>Installing the <code>tidyverse</code> package:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="tidyverse.html#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="st">&quot;tidyverse&quot;</span>)</span></code></pre></div>
<p>To use the <code>tidyverse</code> package load it using the <code>library()</code> function:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="tidyverse.html#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span></code></pre></div>
<p><strong>Chick Weight Data</strong></p>
<p>R comes with many datasets installed. We will use the <code>ChickWeight</code> dataset
to learn about the tidyverse. The help system gives a basic summary of the experiment from
which the data was collect:</p>
<blockquote>
<p><em>“The body weights of the chicks were measured at birth and every second day thereafter
until day 20. They were also measured on day 21. There were four groups of chicks on
different protein diets.”</em></p>
</blockquote>
<p>You can get more information, including references by typing:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="tidyverse.html#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="fu">help</span>(<span class="st">&quot;ChickWeight&quot;</span>)</span></code></pre></div>
<p><strong>The Data: </strong>
There are 578 observations (rows) and 4 variables:</p>
<ul>
<li><code>Chick</code> – unique ID for each chick.</li>
<li><code>Diet</code> – one of four protein diets.</li>
<li><code>Time</code> – number of days since birth.</li>
<li><code>weight</code> – body weight of chick in grams.</li>
</ul>
<p>Note: <code>weight</code> has a lower case <code>w</code> (recall R is case sensitive).</p>
<p>Store the data locally:</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="tidyverse.html#cb37-1" aria-hidden="true" tabindex="-1"></a>ChickWeight <span class="sc">%&gt;%</span></span>
<span id="cb37-2"><a href="tidyverse.html#cb37-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Chick, Diet, Time, weight) <span class="sc">%&gt;%</span> </span>
<span id="cb37-3"><a href="tidyverse.html#cb37-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Chick, Diet, Time) <span class="sc">%&gt;%</span> </span>
<span id="cb37-4"><a href="tidyverse.html#cb37-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">write_csv</span>(<span class="st">&quot;ChickWeight.csv&quot;</span>)</span></code></pre></div>
<p>First we will import the data from a file called <code>ChickWeight.csv</code> using the <code>read_csv()</code>
function from the <code>readr</code> package (part of the <code>tidyverse</code>). The first thing to do,
outside of R, is to open the file <code>ChickWeight.csv</code> to check what it contains and that
it makes sense. Now we can import the data as follows:</p>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="tidyverse.html#cb38-1" aria-hidden="true" tabindex="-1"></a>CW <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">&quot;ChickWeight.csv&quot;</span>)</span></code></pre></div>
<p>If all goes well then the data is now stored in an R object called <code>CW</code>. If you get the
following error message then you need to change the working directory to where the data is
stored.</p>
<pre><code>Error: &#39;ChickWeight.csv&#39; does not exist in current
working directory ...</code></pre>
<p><strong>Changing the working directory:</strong>
In RStudio you can use the menu bar (“Session - Set Working Directory - Choose Directory…”). Alternatively, you can use the function <code>setwd()</code>.</p>
<p><br />
</p>
<p><strong>Looking at the Dataset:</strong>
To look at the data type just type the object (dataset) name:</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="tidyverse.html#cb40-1" aria-hidden="true" tabindex="-1"></a>CW</span>
<span id="cb40-2"><a href="tidyverse.html#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 578 × 4</span></span>
<span id="cb40-3"><a href="tidyverse.html#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    Chick  Diet  Time weight</span></span>
<span id="cb40-4"><a href="tidyverse.html#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;</span></span>
<span id="cb40-5"><a href="tidyverse.html#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  1    18     1     0     39</span></span>
<span id="cb40-6"><a href="tidyverse.html#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  2    18     1     2     35</span></span>
<span id="cb40-7"><a href="tidyverse.html#cb40-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  3    16     1     0     41</span></span>
<span id="cb40-8"><a href="tidyverse.html#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  4    16     1     2     45</span></span>
<span id="cb40-9"><a href="tidyverse.html#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  5    16     1     4     49</span></span>
<span id="cb40-10"><a href="tidyverse.html#cb40-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  6    16     1     6     51</span></span>
<span id="cb40-11"><a href="tidyverse.html#cb40-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  7    16     1     8     57</span></span>
<span id="cb40-12"><a href="tidyverse.html#cb40-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  8    16     1    10     51</span></span>
<span id="cb40-13"><a href="tidyverse.html#cb40-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;  9    16     1    12     54</span></span>
<span id="cb40-14"><a href="tidyverse.html#cb40-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 10    15     1     0     41</span></span>
<span id="cb40-15"><a href="tidyverse.html#cb40-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 568 more rows</span></span></code></pre></div>
<p>If there are too many variables then not all them may be printed. To overcome this issue
we can use the <code>glimpse()</code> function which makes it possible to see every column in your
dataset (called a “data frame” in R speak).</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="tidyverse.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(CW)</span>
<span id="cb41-2"><a href="tidyverse.html#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Rows: 578</span></span>
<span id="cb41-3"><a href="tidyverse.html#cb41-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Columns: 4</span></span>
<span id="cb41-4"><a href="tidyverse.html#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ Chick  &lt;dbl&gt; 18, 18, 16, 16, 16, 16, 16, 16, 16, 15, 15, 15, 15, 15, 15, 15, 15, 13, 1…</span></span>
<span id="cb41-5"><a href="tidyverse.html#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ Diet   &lt;dbl&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…</span></span>
<span id="cb41-6"><a href="tidyverse.html#cb41-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ Time   &lt;dbl&gt; 0, 2, 0, 2, 4, 6, 8, 10, 12, 0, 2, 4, 6, 8, 10, 12, 14, 0, 2, 4, 6, 8, 10…</span></span>
<span id="cb41-7"><a href="tidyverse.html#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ weight &lt;dbl&gt; 39, 35, 41, 45, 49, 51, 57, 51, 54, 41, 49, 56, 64, 68, 68, 67, 68, 41, 4…</span></span></code></pre></div>
<p>The function <code>View()</code> allows for a spread-sheet type of view on the data:</p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="tidyverse.html#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="fu">View</span>(CW)</span></code></pre></div>
<div id="tidyverse-plotting-basics" class="section level3" number="1.7.1">
<h3><span class="header-section-number">1.7.1</span> Tidyverse: Plotting Basics</h3>
<p>To <strong>visualise</strong> the chick weight data, we will use the <code>ggplot2</code> package (part of the
<code>tidyverse</code>). Our interest is in seeing how the <em>weight changes over time for the chicks by
diet</em>. For the moment don’t worry too much about the details just try to build your own
understanding and logic. To learn more try different things even if you get an error
messages.</p>
<p>Let’s plot the weight data (vertical axis) over time (horizontal axis).</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="tidyverse.html#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co"># An empty plot (the plot on the left)</span></span>
<span id="cb43-2"><a href="tidyverse.html#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(CW, <span class="fu">aes</span>(Time, weight))  </span>
<span id="cb43-3"><a href="tidyverse.html#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="co"># With data (the plot on the right)</span></span>
<span id="cb43-4"><a href="tidyverse.html#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(CW, <span class="fu">aes</span>(Time, weight)) <span class="sc">+</span> <span class="fu">geom_point</span>() </span></code></pre></div>
<p><img src="figure/minimal-emptyPlot-1.png" width="80%" style="display: block; margin: auto;" /><img src="figure/minimal-emptyPlot-2.png" width="80%" style="display: block; margin: auto;" /></p>
<p>Add color for <code>Diet</code>. The graph above does not differentiate between the diets. Let’s use a different color for
each diet.</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="tidyverse.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding colour for diet</span></span>
<span id="cb44-2"><a href="tidyverse.html#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(CW,<span class="fu">aes</span>(Time,weight,<span class="at">colour=</span><span class="fu">factor</span>(Diet))) <span class="sc">+</span></span>
<span id="cb44-3"><a href="tidyverse.html#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() </span></code></pre></div>
<p><img src="figure/minimal-addColourPlot-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>It is difficult to conclude anything from this graph as the points are printed on top of
one another (with diet 1 underneath and diet 4 at the top).</p>
<p><strong>Factor Variables:</strong>
Before we continue, we have to make an important change to the <code>CW</code> dataset by making
<code>Diet</code> and <code>Time</code> <em>factor variables</em>. This means that R will treat them as categorical
variables (see the <code>&lt;fct&gt;</code> variables below) instead of continuous variables. It will
simplify our coding. The next section will explain the <code>mutate()</code> function.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="tidyverse.html#cb45-1" aria-hidden="true" tabindex="-1"></a>CW <span class="ot">&lt;-</span> <span class="fu">mutate</span>(CW, <span class="at">Diet =</span> <span class="fu">factor</span>(Diet))</span>
<span id="cb45-2"><a href="tidyverse.html#cb45-2" aria-hidden="true" tabindex="-1"></a>CW <span class="ot">&lt;-</span> <span class="fu">mutate</span>(CW, <span class="at">Time =</span> <span class="fu">factor</span>(Time))</span>
<span id="cb45-3"><a href="tidyverse.html#cb45-3" aria-hidden="true" tabindex="-1"></a><span class="fu">glimpse</span>(CW)</span>
<span id="cb45-4"><a href="tidyverse.html#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Rows: 578</span></span>
<span id="cb45-5"><a href="tidyverse.html#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; Columns: 4</span></span>
<span id="cb45-6"><a href="tidyverse.html#cb45-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ Chick  &lt;dbl&gt; 18, 18, 16, 16, 16, 16, 16, 16, 16, 15, 15, 15, 15, 15, 15, 15, 15, 13, 1…</span></span>
<span id="cb45-7"><a href="tidyverse.html#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ Diet   &lt;fct&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…</span></span>
<span id="cb45-8"><a href="tidyverse.html#cb45-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ Time   &lt;fct&gt; 0, 2, 0, 2, 4, 6, 8, 10, 12, 0, 2, 4, 6, 8, 10, 12, 14, 0, 2, 4, 6, 8, 10…</span></span>
<span id="cb45-9"><a href="tidyverse.html#cb45-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; $ weight &lt;dbl&gt; 39, 35, 41, 45, 49, 51, 57, 51, 54, 41, 49, 56, 64, 68, 68, 67, 68, 41, 4…</span></span></code></pre></div>
<p>The <code>facet_wrap()</code> function: To plot each diet separately in a grid using <code>facet_wrap()</code>:</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="tidyverse.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Adding jitter to the points</span></span>
<span id="cb46-2"><a href="tidyverse.html#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(CW, <span class="fu">aes</span>(Time, weight, <span class="at">colour=</span>Diet)) <span class="sc">+</span></span>
<span id="cb46-3"><a href="tidyverse.html#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb46-4"><a href="tidyverse.html#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Diet) <span class="sc">+</span></span>
<span id="cb46-5"><a href="tidyverse.html#cb46-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;bottom&quot;</span>)</span></code></pre></div>
<p><img src="figure/minimal-ScatterPlot-1.png" width="80%" style="display: block; margin: auto;" /></p>
<!-- To overcome the issue of ovelapping points we can ***jitter*** the points using  -->
<!-- `geom_jitter()`. Replace the `geom_point()` above with `geom_jitter()`. What do you -->
<!-- observe? -->
<!-- ```{r jitterPlot2} -->
<!-- # Adding jitter to the points -->
<!-- ggplot(CW, aes(Time, weight, colour=Diet)) + -->
<!--   geom_jitter() + -->
<!--   facet_wrap(~Diet) + -->
<!--   theme(legend.position = "bottom") -->
<!-- ``` -->
<p><strong>Interpretation:</strong> Diet 4 has the least variability but we can’t really say anything about the mean effect
of each diet although diet 3 seems to have the highest.</p>
<p>Next we will plot the <strong>mean changes</strong> over time for each diet using the <code>stat_summary()</code> function:</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb47-1"><a href="tidyverse.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(CW, <span class="fu">aes</span>(Time, weight, </span>
<span id="cb47-2"><a href="tidyverse.html#cb47-2" aria-hidden="true" tabindex="-1"></a>               <span class="at">group=</span>Diet, <span class="at">colour=</span>Diet)) <span class="sc">+</span></span>
<span id="cb47-3"><a href="tidyverse.html#cb47-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>, <span class="at">geom=</span><span class="st">&quot;line&quot;</span>) </span></code></pre></div>
<p><img src="figure/minimal-meanlinesPlot-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p><strong>Interpretation:</strong>
We can see that diet 3 has the highest mean weight gains by the end of the experiment. However,
we don’t have any information about the variation (uncertainty) in the data.</p>
<p>To see variation between the different diets we use <code>geom_boxplot</code> to plot a box-whisker plot.
A note of caution is that the number of chicks per diet is relatively low to produce this plot.</p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="tidyverse.html#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(CW, <span class="fu">aes</span>(Time, weight, <span class="at">colour=</span>Diet)) <span class="sc">+</span></span>
<span id="cb48-2"><a href="tidyverse.html#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Diet) <span class="sc">+</span></span>
<span id="cb48-3"><a href="tidyverse.html#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_boxplot</span>() <span class="sc">+</span></span>
<span id="cb48-4"><a href="tidyverse.html#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb48-5"><a href="tidyverse.html#cb48-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Chick Weight over Time by Diet&quot;</span>)</span></code></pre></div>
<p><img src="figure/minimal-boxPlot-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p><strong>Interpretation:</strong>
Diet 3 seems to have the highest “average” weight gain but it has more variation
than diet 4 which is consistent with our findings so far.</p>
<p>Let’s finish with a plot that you might include in a publication.</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="tidyverse.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(CW, <span class="fu">aes</span>(Time, weight, <span class="at">group=</span>Diet, </span>
<span id="cb49-2"><a href="tidyverse.html#cb49-2" aria-hidden="true" tabindex="-1"></a>                             <span class="at">colour=</span>Diet)) <span class="sc">+</span></span>
<span id="cb49-3"><a href="tidyverse.html#cb49-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>Diet) <span class="sc">+</span></span>
<span id="cb49-4"><a href="tidyverse.html#cb49-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_point</span>() <span class="sc">+</span></span>
<span id="cb49-5"><a href="tidyverse.html#cb49-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># geom_jitter() +</span></span>
<span id="cb49-6"><a href="tidyverse.html#cb49-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">stat_summary</span>(<span class="at">fun=</span><span class="st">&quot;mean&quot;</span>, <span class="at">geom=</span><span class="st">&quot;line&quot;</span>,</span>
<span id="cb49-7"><a href="tidyverse.html#cb49-7" aria-hidden="true" tabindex="-1"></a>               <span class="at">colour=</span><span class="st">&quot;black&quot;</span>) <span class="sc">+</span></span>
<span id="cb49-8"><a href="tidyverse.html#cb49-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">&quot;none&quot;</span>) <span class="sc">+</span></span>
<span id="cb49-9"><a href="tidyverse.html#cb49-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">&quot;Chick Weight over Time by Diet&quot;</span>) <span class="sc">+</span> </span>
<span id="cb49-10"><a href="tidyverse.html#cb49-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">xlab</span>(<span class="st">&quot;Time (days)&quot;</span>) <span class="sc">+</span></span>
<span id="cb49-11"><a href="tidyverse.html#cb49-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ylab</span>(<span class="st">&quot;Weight (grams)&quot;</span>)</span></code></pre></div>
<p><img src="figure/minimal-finalPlot-1.png" width="80%" style="display: block; margin: auto;" /></p>
</div>
<div id="tidyverse-data-wrangling-basics" class="section level3" number="1.7.2">
<h3><span class="header-section-number">1.7.2</span> Tidyverse: Data Wrangling Basics</h3>
<p>In this section we will learn how to wrangle (manipulate) datasets using the <code>tidyverse</code>
package. Let’s start with the <code>mutate()</code>, <code>select()</code>, <code>rename()</code>, <code>filter()</code> and <code>arrange()</code>
functions.</p>
<p><br />
</p>
<p><code>mutate()</code>: Adds a new variable (column) or modifies an existing one. We already used this above to create
factor variables.</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb50-1"><a href="tidyverse.html#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Added a column</span></span>
<span id="cb50-2"><a href="tidyverse.html#cb50-2" aria-hidden="true" tabindex="-1"></a>CWm1 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(CW, <span class="at">weightKg =</span> weight<span class="sc">/</span><span class="dv">1000</span>)</span>
<span id="cb50-3"><a href="tidyverse.html#cb50-3" aria-hidden="true" tabindex="-1"></a>CWm1</span>
<span id="cb50-4"><a href="tidyverse.html#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 578 × 5</span></span>
<span id="cb50-5"><a href="tidyverse.html#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Chick Diet  Time  weight weightKg</span></span>
<span id="cb50-6"><a href="tidyverse.html#cb50-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;  &lt;dbl&gt;    &lt;dbl&gt;</span></span>
<span id="cb50-7"><a href="tidyverse.html#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    18 1     0         39    0.039</span></span>
<span id="cb50-8"><a href="tidyverse.html#cb50-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    18 1     2         35    0.035</span></span>
<span id="cb50-9"><a href="tidyverse.html#cb50-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    16 1     0         41    0.041</span></span>
<span id="cb50-10"><a href="tidyverse.html#cb50-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 575 more rows</span></span>
<span id="cb50-11"><a href="tidyverse.html#cb50-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Modify an existing column</span></span>
<span id="cb50-12"><a href="tidyverse.html#cb50-12" aria-hidden="true" tabindex="-1"></a>CWm2 <span class="ot">&lt;-</span> <span class="fu">mutate</span>(CW, <span class="at">Diet =</span> <span class="fu">str_c</span>(<span class="st">&quot;Diet &quot;</span>, Diet))</span>
<span id="cb50-13"><a href="tidyverse.html#cb50-13" aria-hidden="true" tabindex="-1"></a>CWm2</span>
<span id="cb50-14"><a href="tidyverse.html#cb50-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 578 × 4</span></span>
<span id="cb50-15"><a href="tidyverse.html#cb50-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Chick Diet   Time  weight</span></span>
<span id="cb50-16"><a href="tidyverse.html#cb50-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;chr&gt;  &lt;fct&gt;  &lt;dbl&gt;</span></span>
<span id="cb50-17"><a href="tidyverse.html#cb50-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    18 Diet 1 0         39</span></span>
<span id="cb50-18"><a href="tidyverse.html#cb50-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    18 Diet 1 2         35</span></span>
<span id="cb50-19"><a href="tidyverse.html#cb50-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    16 Diet 1 0         41</span></span>
<span id="cb50-20"><a href="tidyverse.html#cb50-20" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 575 more rows</span></span></code></pre></div>
<p><br />
</p>
<p><code>select()</code>: Keeps, drops or reorders variables.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="tidyverse.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Drop the weight variable from CWm1 using minus</span></span>
<span id="cb51-2"><a href="tidyverse.html#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(CWm1, <span class="sc">-</span>weight)</span>
<span id="cb51-3"><a href="tidyverse.html#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 578 × 4</span></span>
<span id="cb51-4"><a href="tidyverse.html#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Chick Diet  Time  weightKg</span></span>
<span id="cb51-5"><a href="tidyverse.html#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;    &lt;dbl&gt;</span></span>
<span id="cb51-6"><a href="tidyverse.html#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    18 1     0        0.039</span></span>
<span id="cb51-7"><a href="tidyverse.html#cb51-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    18 1     2        0.035</span></span>
<span id="cb51-8"><a href="tidyverse.html#cb51-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    16 1     0        0.041</span></span>
<span id="cb51-9"><a href="tidyverse.html#cb51-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 575 more rows</span></span>
<span id="cb51-10"><a href="tidyverse.html#cb51-10" aria-hidden="true" tabindex="-1"></a><span class="co"># Keep variables Time, Diet and weightKg</span></span>
<span id="cb51-11"><a href="tidyverse.html#cb51-11" aria-hidden="true" tabindex="-1"></a><span class="fu">select</span>(CWm1, Chick, Time, Diet, weightKg)</span>
<span id="cb51-12"><a href="tidyverse.html#cb51-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 578 × 4</span></span>
<span id="cb51-13"><a href="tidyverse.html#cb51-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Chick Time  Diet  weightKg</span></span>
<span id="cb51-14"><a href="tidyverse.html#cb51-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;    &lt;dbl&gt;</span></span>
<span id="cb51-15"><a href="tidyverse.html#cb51-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    18 0     1        0.039</span></span>
<span id="cb51-16"><a href="tidyverse.html#cb51-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    18 2     1        0.035</span></span>
<span id="cb51-17"><a href="tidyverse.html#cb51-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    16 0     1        0.041</span></span>
<span id="cb51-18"><a href="tidyverse.html#cb51-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 575 more rows</span></span></code></pre></div>
<p><br />
</p>
<p><code>rename()</code>: Renames variables whilst keeping all variables.</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb52-1"><a href="tidyverse.html#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="fu">rename</span>(CW, <span class="at">Group =</span> Diet, <span class="at">Weight =</span> weight)</span>
<span id="cb52-2"><a href="tidyverse.html#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 578 × 4</span></span>
<span id="cb52-3"><a href="tidyverse.html#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Chick Group Time  Weight</span></span>
<span id="cb52-4"><a href="tidyverse.html#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;  &lt;dbl&gt;</span></span>
<span id="cb52-5"><a href="tidyverse.html#cb52-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    18 1     0         39</span></span>
<span id="cb52-6"><a href="tidyverse.html#cb52-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    18 1     2         35</span></span>
<span id="cb52-7"><a href="tidyverse.html#cb52-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    16 1     0         41</span></span>
<span id="cb52-8"><a href="tidyverse.html#cb52-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 575 more rows</span></span></code></pre></div>
<p><br />
</p>
<p><code>filter()</code>: Keeps or drops observations (rows).</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="tidyverse.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">filter</span>(CW, Time<span class="sc">==</span><span class="dv">21</span> <span class="sc">&amp;</span> weight<span class="sc">&gt;</span><span class="dv">300</span>)</span>
<span id="cb53-2"><a href="tidyverse.html#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 8 × 4</span></span>
<span id="cb53-3"><a href="tidyverse.html#cb53-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Chick Diet  Time  weight</span></span>
<span id="cb53-4"><a href="tidyverse.html#cb53-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;  &lt;dbl&gt;</span></span>
<span id="cb53-5"><a href="tidyverse.html#cb53-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1     7 1     21       305</span></span>
<span id="cb53-6"><a href="tidyverse.html#cb53-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    29 2     21       309</span></span>
<span id="cb53-7"><a href="tidyverse.html#cb53-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    21 2     21       331</span></span>
<span id="cb53-8"><a href="tidyverse.html#cb53-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 5 more rows</span></span></code></pre></div>
<p>For comparing values in vectors use: <code>&lt;</code> (less than), <code>&gt;</code> (greater than), <code>&lt;=</code>
(less than and equal to), <code>&gt;=</code> (greater than and equal to), <code>==</code> (equal to) and <code>!=</code>
(not equal to). These can be combined logically using <code>&amp;</code> (and) and <code>|</code> (or).</p>
<p><br />
</p>
<p><code>arrange()</code>: Changes the order of the observations.</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb54-1"><a href="tidyverse.html#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(CW, Chick, Time)</span>
<span id="cb54-2"><a href="tidyverse.html#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 578 × 4</span></span>
<span id="cb54-3"><a href="tidyverse.html#cb54-3" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Chick Diet  Time  weight</span></span>
<span id="cb54-4"><a href="tidyverse.html#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;  &lt;dbl&gt;</span></span>
<span id="cb54-5"><a href="tidyverse.html#cb54-5" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1     1 1     0         42</span></span>
<span id="cb54-6"><a href="tidyverse.html#cb54-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2     1 1     2         51</span></span>
<span id="cb54-7"><a href="tidyverse.html#cb54-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3     1 1     4         59</span></span>
<span id="cb54-8"><a href="tidyverse.html#cb54-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 575 more rows</span></span>
<span id="cb54-9"><a href="tidyverse.html#cb54-9" aria-hidden="true" tabindex="-1"></a><span class="fu">arrange</span>(CW, <span class="fu">desc</span>(weight))</span>
<span id="cb54-10"><a href="tidyverse.html#cb54-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 578 × 4</span></span>
<span id="cb54-11"><a href="tidyverse.html#cb54-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Chick Diet  Time  weight</span></span>
<span id="cb54-12"><a href="tidyverse.html#cb54-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;fct&gt; &lt;fct&gt;  &lt;dbl&gt;</span></span>
<span id="cb54-13"><a href="tidyverse.html#cb54-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1    35 3     21       373</span></span>
<span id="cb54-14"><a href="tidyverse.html#cb54-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2    35 3     20       361</span></span>
<span id="cb54-15"><a href="tidyverse.html#cb54-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3    34 3     21       341</span></span>
<span id="cb54-16"><a href="tidyverse.html#cb54-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 575 more rows</span></span></code></pre></div>
<p>What does the <code>desc()</code> do? Try using <code>desc(Time)</code>.</p>
</div>
<div id="the-pipe-operator" class="section level3" number="1.7.3">
<h3><span class="header-section-number">1.7.3</span> The pipe operator <code>%&gt;%</code></h3>
<p>In reality you will end up doing multiple data wrangling steps that you want to save.
The pipe operator <code>%&gt;%</code> makes your code nice and readable:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="tidyverse.html#cb55-1" aria-hidden="true" tabindex="-1"></a>CW21 <span class="ot">&lt;-</span> CW <span class="sc">%&gt;%</span> </span>
<span id="cb55-2"><a href="tidyverse.html#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Time <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">21</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb55-3"><a href="tidyverse.html#cb55-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Weight =</span> weight) <span class="sc">%&gt;%</span> </span>
<span id="cb55-4"><a href="tidyverse.html#cb55-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Group =</span> <span class="fu">factor</span>(<span class="fu">str_c</span>(<span class="st">&quot;Diet &quot;</span>, Diet))) <span class="sc">%&gt;%</span> </span>
<span id="cb55-5"><a href="tidyverse.html#cb55-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Chick, Group, Time, Weight) <span class="sc">%&gt;%</span> </span>
<span id="cb55-6"><a href="tidyverse.html#cb55-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Chick, Time) </span>
<span id="cb55-7"><a href="tidyverse.html#cb55-7" aria-hidden="true" tabindex="-1"></a>CW21</span>
<span id="cb55-8"><a href="tidyverse.html#cb55-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 95 × 4</span></span>
<span id="cb55-9"><a href="tidyverse.html#cb55-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Chick Group  Time  Weight</span></span>
<span id="cb55-10"><a href="tidyverse.html#cb55-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;dbl&gt; &lt;fct&gt;  &lt;fct&gt;  &lt;dbl&gt;</span></span>
<span id="cb55-11"><a href="tidyverse.html#cb55-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1     1 Diet 1 0         42</span></span>
<span id="cb55-12"><a href="tidyverse.html#cb55-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2     1 Diet 1 21       205</span></span>
<span id="cb55-13"><a href="tidyverse.html#cb55-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3     2 Diet 1 0         40</span></span>
<span id="cb55-14"><a href="tidyverse.html#cb55-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 92 more rows</span></span></code></pre></div>
<p>Hint: To understand the code above we should read the pipe operator <code>%&gt;%</code> as “then”.</p>
<blockquote>
<p>Create a new dataset (object) called <code>CW21</code> using dataset <code>CW</code> <strong><em>then</em></strong>
keep the data for days 0 and 21 <strong><em>then</em></strong> rename variable <code>weight</code> to <code>Weight</code>
<strong><em>then</em></strong> create a variable called <code>Group</code> <strong><em>then</em></strong> keep variables <code>Chick</code>,
<code>Group</code>, <code>Time</code> and <code>Weight</code> and <strong><em>then</em></strong> finally arrange the data by
variables <code>Chick</code> and <code>Time</code>.</p>
</blockquote>
<p>This is the same code:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="tidyverse.html#cb56-1" aria-hidden="true" tabindex="-1"></a>CW21 <span class="ot">&lt;-</span> CW <span class="sc">%&gt;%</span> </span>
<span id="cb56-2"><a href="tidyverse.html#cb56-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(., Time <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">21</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb56-3"><a href="tidyverse.html#cb56-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(., <span class="at">Weight =</span> weight) <span class="sc">%&gt;%</span> </span>
<span id="cb56-4"><a href="tidyverse.html#cb56-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(., <span class="at">Group=</span><span class="fu">factor</span>(<span class="fu">str_c</span>(<span class="st">&quot;Diet &quot;</span>,Diet))) <span class="sc">%&gt;%</span> </span>
<span id="cb56-5"><a href="tidyverse.html#cb56-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(., Chick, Group, Time, Weight) <span class="sc">%&gt;%</span> </span>
<span id="cb56-6"><a href="tidyverse.html#cb56-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(., Chick, Time) </span></code></pre></div>
<p>The pipe operator, <code>%&gt;%</code>, replaces the dots (<code>.</code>) with whatever is returned from code
preceding it. For example, the dot in <code>filter(., Time %in% c(0, 21))</code> is replaced by
<code>CW</code>. The output of the <code>filter(...)</code> then replaces the dot in
<code>rename(., Weight = weight)</code> and so on. Think of it as a data assembly line with
each function doing its thing and passing it to the next.</p>
</div>
<div id="the-group_by-function" class="section level3" number="1.7.4">
<h3><span class="header-section-number">1.7.4</span> The <code>group_by()</code> function</h3>
<p>From the data visualizations above we concluded that the diet 3 has the highest mean
and diet 4 the least variation. In this section, we will quantify the effects of the
diets using <strong>summmary statistics</strong>. We start by looking at the number of observations
and the mean by <strong>diet</strong> and <strong>time</strong>.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="tidyverse.html#cb57-1" aria-hidden="true" tabindex="-1"></a>mnsdCW <span class="ot">&lt;-</span> CW <span class="sc">%&gt;%</span> </span>
<span id="cb57-2"><a href="tidyverse.html#cb57-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Diet, Time) <span class="sc">%&gt;%</span> </span>
<span id="cb57-3"><a href="tidyverse.html#cb57-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">N =</span> <span class="fu">n</span>(), <span class="at">Mean =</span> <span class="fu">mean</span>(weight)) <span class="sc">%&gt;%</span> </span>
<span id="cb57-4"><a href="tidyverse.html#cb57-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Diet, Time)</span>
<span id="cb57-5"><a href="tidyverse.html#cb57-5" aria-hidden="true" tabindex="-1"></a>mnsdCW</span>
<span id="cb57-6"><a href="tidyverse.html#cb57-6" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 48 × 4</span></span>
<span id="cb57-7"><a href="tidyverse.html#cb57-7" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # Groups:   Diet [4]</span></span>
<span id="cb57-8"><a href="tidyverse.html#cb57-8" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Diet  Time      N  Mean</span></span>
<span id="cb57-9"><a href="tidyverse.html#cb57-9" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt; &lt;fct&gt; &lt;int&gt; &lt;dbl&gt;</span></span>
<span id="cb57-10"><a href="tidyverse.html#cb57-10" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 1     0        20  41.4</span></span>
<span id="cb57-11"><a href="tidyverse.html#cb57-11" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 1     2        20  47.2</span></span>
<span id="cb57-12"><a href="tidyverse.html#cb57-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 1     4        19  56.5</span></span>
<span id="cb57-13"><a href="tidyverse.html#cb57-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 45 more rows</span></span></code></pre></div>
<p>For each distinct combination of <code>Diet</code> and <code>Time</code>, the chick weight data is summarized
into the number of observations (<code>N</code>) and the mean (<code>Mean</code>) of <code>weight</code>.</p>
<p><strong>Further summaries:</strong> Let’s also calculate the standard deviation, median, minimum and maximum values but only
at days 0 and 21.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="tidyverse.html#cb58-1" aria-hidden="true" tabindex="-1"></a>sumCW <span class="ot">&lt;-</span>  CW <span class="sc">%&gt;%</span> </span>
<span id="cb58-2"><a href="tidyverse.html#cb58-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Time <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">21</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb58-3"><a href="tidyverse.html#cb58-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Diet, Time) <span class="sc">%&gt;%</span> </span>
<span id="cb58-4"><a href="tidyverse.html#cb58-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">N =</span> <span class="fu">n</span>(),</span>
<span id="cb58-5"><a href="tidyverse.html#cb58-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">Mean =</span> <span class="fu">mean</span>(weight),</span>
<span id="cb58-6"><a href="tidyverse.html#cb58-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">SD =</span> <span class="fu">sd</span>(weight),</span>
<span id="cb58-7"><a href="tidyverse.html#cb58-7" aria-hidden="true" tabindex="-1"></a>            <span class="at">Median =</span> <span class="fu">median</span>(weight),</span>
<span id="cb58-8"><a href="tidyverse.html#cb58-8" aria-hidden="true" tabindex="-1"></a>            <span class="at">Min =</span> <span class="fu">min</span>(weight),</span>
<span id="cb58-9"><a href="tidyverse.html#cb58-9" aria-hidden="true" tabindex="-1"></a>            <span class="at">Max =</span> <span class="fu">max</span>(weight)) <span class="sc">%&gt;%</span> </span>
<span id="cb58-10"><a href="tidyverse.html#cb58-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(Diet, Time)</span>
<span id="cb58-11"><a href="tidyverse.html#cb58-11" aria-hidden="true" tabindex="-1"></a>sumCW</span>
<span id="cb58-12"><a href="tidyverse.html#cb58-12" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # A tibble: 8 × 8</span></span>
<span id="cb58-13"><a href="tidyverse.html#cb58-13" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # Groups:   Diet [4]</span></span>
<span id="cb58-14"><a href="tidyverse.html#cb58-14" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   Diet  Time      N  Mean     SD Median   Min   Max</span></span>
<span id="cb58-15"><a href="tidyverse.html#cb58-15" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt;   &lt;fct&gt; &lt;fct&gt; &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span></span>
<span id="cb58-16"><a href="tidyverse.html#cb58-16" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 1 1     0        20  41.4  0.995   41      39    43</span></span>
<span id="cb58-17"><a href="tidyverse.html#cb58-17" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 2 1     21       16 178.  58.7    166      96   305</span></span>
<span id="cb58-18"><a href="tidyverse.html#cb58-18" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; 3 2     0        10  40.7  1.49    40.5    39    43</span></span>
<span id="cb58-19"><a href="tidyverse.html#cb58-19" aria-hidden="true" tabindex="-1"></a><span class="co">#&gt; # … with 5 more rows</span></span></code></pre></div>
<p>Let’s make the summaries “prettier”, say, for a report or publication.</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="tidyverse.html#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;knitr&quot;</span>) <span class="co"># to use the kable() function</span></span>
<span id="cb59-2"><a href="tidyverse.html#cb59-2" aria-hidden="true" tabindex="-1"></a>prettySumCW <span class="ot">&lt;-</span> sumCW <span class="sc">%&gt;%</span> </span>
<span id="cb59-3"><a href="tidyverse.html#cb59-3" aria-hidden="true" tabindex="-1"></a> <span class="fu">mutate</span>(<span class="st">`</span><span class="at">Mean (SD)</span><span class="st">`</span> <span class="ot">=</span> <span class="fu">str_c</span>(<span class="fu">format</span>(Mean, <span class="at">digits=</span><span class="dv">1</span>),</span>
<span id="cb59-4"><a href="tidyverse.html#cb59-4" aria-hidden="true" tabindex="-1"></a>           <span class="st">&quot; (&quot;</span>, <span class="fu">format</span>(SD, <span class="at">digits=</span><span class="dv">2</span>), <span class="st">&quot;)&quot;</span>)) <span class="sc">%&gt;%</span> </span>
<span id="cb59-5"><a href="tidyverse.html#cb59-5" aria-hidden="true" tabindex="-1"></a> <span class="fu">mutate</span>(<span class="at">Range =</span> <span class="fu">str_c</span>(Min, <span class="st">&quot; - &quot;</span>, Max)) <span class="sc">%&gt;%</span> </span>
<span id="cb59-6"><a href="tidyverse.html#cb59-6" aria-hidden="true" tabindex="-1"></a> <span class="fu">select</span>(Diet, Time, N, <span class="st">`</span><span class="at">Mean (SD)</span><span class="st">`</span>, Median, Range) <span class="sc">%&gt;%</span></span>
<span id="cb59-7"><a href="tidyverse.html#cb59-7" aria-hidden="true" tabindex="-1"></a> <span class="fu">arrange</span>(Diet, Time) <span class="sc">%&gt;%</span> </span>
<span id="cb59-8"><a href="tidyverse.html#cb59-8" aria-hidden="true" tabindex="-1"></a> <span class="fu">kable</span>(<span class="at">format =</span> <span class="st">&quot;latex&quot;</span>)</span>
<span id="cb59-9"><a href="tidyverse.html#cb59-9" aria-hidden="true" tabindex="-1"></a>prettySumCW</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
Diet
</th>
<th style="text-align:left;">
Time
</th>
<th style="text-align:right;">
N
</th>
<th style="text-align:left;">
Mean (SD)
</th>
<th style="text-align:right;">
Median
</th>
<th style="text-align:left;">
Range
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:right;">
20
</td>
<td style="text-align:left;">
41 ( 0.99)
</td>
<td style="text-align:right;">
41.0
</td>
<td style="text-align:left;">
39 - 43
</td>
</tr>
<tr>
<td style="text-align:left;">
1
</td>
<td style="text-align:left;">
21
</td>
<td style="text-align:right;">
16
</td>
<td style="text-align:left;">
178 (58.70)
</td>
<td style="text-align:right;">
166.0
</td>
<td style="text-align:left;">
96 - 305
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
41 ( 1.5)
</td>
<td style="text-align:right;">
40.5
</td>
<td style="text-align:left;">
39 - 43
</td>
</tr>
<tr>
<td style="text-align:left;">
2
</td>
<td style="text-align:left;">
21
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
215 (78.1)
</td>
<td style="text-align:right;">
212.5
</td>
<td style="text-align:left;">
74 - 331
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
41 ( 1)
</td>
<td style="text-align:right;">
41.0
</td>
<td style="text-align:left;">
39 - 42
</td>
</tr>
<tr>
<td style="text-align:left;">
3
</td>
<td style="text-align:left;">
21
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
270 (72)
</td>
<td style="text-align:right;">
281.0
</td>
<td style="text-align:left;">
147 - 373
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
0
</td>
<td style="text-align:right;">
10
</td>
<td style="text-align:left;">
41 ( 1.1)
</td>
<td style="text-align:right;">
41.0
</td>
<td style="text-align:left;">
39 - 42
</td>
</tr>
<tr>
<td style="text-align:left;">
4
</td>
<td style="text-align:left;">
21
</td>
<td style="text-align:right;">
9
</td>
<td style="text-align:left;">
239 (43.3)
</td>
<td style="text-align:right;">
237.0
</td>
<td style="text-align:left;">
196 - 322
</td>
</tr>
</tbody>
</table>
<!-- Eventually you should be able to produce a publication ready version as follows: -->
<!-- ```{r prettyKable, echo = FALSE} -->
<!-- library("knitr") -->
<!-- prettySumCW %>%  -->
<!-- kable("latex", booktabs = TRUE, linesep = "", align = "cccrc") %>%  -->
<!--   #kable_styling(position = "center") %>%  -->
<!--   row_spec(0, bold = TRUE) %>% -->
<!--   row_spec(c(2, 4, 6, 8), background = "lightgray") -->
<!--   # Uncomment below once bugs are fixed - https://github.com/haozhu233/kableExtra/issues/243 & 237 -->
<!--   # column_spec(1, bold = T) %>% -->
<!--   # collapse_rows(columns = 1, latex_hline = "none", valign = "top") -->
<!-- ``` -->
<p><strong>Interpretation:</strong>
This summary table offers the same interpretation as before, namely that diet 3 has the
highest mean and median weights at day 21 but a higher variation than group 4.
However it should be noted that at day 21, diet 1 lost 4 chicks from 20 that started
and diet 4 lost 1 from 10. This could be a sign of some health related issues.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="r-packages.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="further-links.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Script_Econometrics_MSc.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection",
"scroll_highlight": true
},
"toolbar": {
"position": "fixed",
"download": "https://uni-bonn.sciebo.de/s/IZ2yeLeA4dRTFUY",
"search": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
