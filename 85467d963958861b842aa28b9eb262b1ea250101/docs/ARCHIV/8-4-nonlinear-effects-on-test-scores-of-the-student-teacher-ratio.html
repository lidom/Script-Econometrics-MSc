<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>8.4 Nonlinear Effects on Test Scores of the Student-Teacher Ratio | Advanced Regression Analysis</title>
  <meta name="description" content="8.4 Nonlinear Effects on Test Scores of the Student-Teacher Ratio | Advanced Regression Analysis" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="8.4 Nonlinear Effects on Test Scores of the Student-Teacher Ratio | Advanced Regression Analysis" />
  <meta property="og:type" content="book" />
  
  <meta property="og:image" content="images/mylogo.png" />
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="8.4 Nonlinear Effects on Test Scores of the Student-Teacher Ratio | Advanced Regression Analysis" />
  
  
  <meta name="twitter:image" content="images/mylogo.png" />

<meta name="author" content="Dominik Liebl" />


<meta name="date" content="2020-09-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="8-3-interactions-between-independent-variables.html"/>
<link rel="next" href="8-5-exercises-8.html"/>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<script src="libs/htmlwidgets-1.3/htmlwidgets.js"></script>
<script src="libs/plotly-binding-4.9.0/plotly.js"></script>
<script src="libs/typedarray-0.1/typedarray.min.js"></script>
<link href="libs/crosstalk-1.0.0/css/crosstalk.css" rel="stylesheet" />
<script src="libs/crosstalk-1.0.0/js/crosstalk.min.js"></script>
<link href="libs/plotly-htmlwidgets-css-1.46.1/plotly-htmlwidgets.css" rel="stylesheet" />
<script src="libs/plotly-main-1.46.1/plotly-latest.min.js"></script>


<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(data-line-number);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  { background-color: #f8f8f8; }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #c4a000; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #000000; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #000000; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #000000; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
<link rel="stylesheet" href="toc.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><center><a href="http://www.dliebl.com/AdvRA/"><img src="images/mylogo.png" alt="logo" width="100%" height="100%"style="margin: 15px 0 0 0"></a></center></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="1-a-very-short-introduction-to-r-and-rstudio.html"><a href="1-a-very-short-introduction-to-r-and-rstudio.html"><i class="fa fa-check"></i><b>1</b> A Very Short Introduction to <tt>R</tt> and <em>RStudio</em></a></li>
<li class="chapter" data-level="2" data-path="2-pt.html"><a href="2-pt.html"><i class="fa fa-check"></i><b>2</b> Probability Theory</a><ul>
<li class="chapter" data-level="2.1" data-path="2-1-random-variables-and-probability-distributions.html"><a href="2-1-random-variables-and-probability-distributions.html"><i class="fa fa-check"></i><b>2.1</b> Random Variables and Probability Distributions</a><ul>
<li class="chapter" data-level="" data-path="2-1-random-variables-and-probability-distributions.html"><a href="2-1-random-variables-and-probability-distributions.html#probability-distributions-of-discrete-random-variables"><i class="fa fa-check"></i>Probability Distributions of Discrete Random Variables</a></li>
<li class="chapter" data-level="" data-path="2-1-random-variables-and-probability-distributions.html"><a href="2-1-random-variables-and-probability-distributions.html#bernoulli-trials"><i class="fa fa-check"></i>Bernoulli Trials</a></li>
<li class="chapter" data-level="" data-path="2-1-random-variables-and-probability-distributions.html"><a href="2-1-random-variables-and-probability-distributions.html#expected-value-mean-and-variance"><i class="fa fa-check"></i>Expected Value, Mean and Variance</a></li>
<li class="chapter" data-level="" data-path="2-1-random-variables-and-probability-distributions.html"><a href="2-1-random-variables-and-probability-distributions.html#probability-distributions-of-continuous-random-variables"><i class="fa fa-check"></i>Probability Distributions of Continuous Random Variables</a></li>
<li class="chapter" data-level="" data-path="2-1-random-variables-and-probability-distributions.html"><a href="2-1-random-variables-and-probability-distributions.html#the-normal-distribution"><i class="fa fa-check"></i>The Normal Distribution</a></li>
<li class="chapter" data-level="" data-path="2-1-random-variables-and-probability-distributions.html"><a href="2-1-random-variables-and-probability-distributions.html#the-chi-squared-distribution"><i class="fa fa-check"></i>The Chi-Squared Distribution</a></li>
<li class="chapter" data-level="" data-path="2-1-random-variables-and-probability-distributions.html"><a href="2-1-random-variables-and-probability-distributions.html#thetdist"><i class="fa fa-check"></i>The Student t Distribution</a></li>
<li class="chapter" data-level="" data-path="2-1-random-variables-and-probability-distributions.html"><a href="2-1-random-variables-and-probability-distributions.html#the-f-distribution"><i class="fa fa-check"></i>The F Distribution</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="2-2-RSATDOSA.html"><a href="2-2-RSATDOSA.html"><i class="fa fa-check"></i><b>2.2</b> Random Sampling and the Distribution of Sample Averages</a><ul>
<li class="chapter" data-level="" data-path="2-2-RSATDOSA.html"><a href="2-2-RSATDOSA.html#mean-and-variance-of-the-sample-mean"><i class="fa fa-check"></i>Mean and Variance of the Sample Mean</a></li>
<li class="chapter" data-level="" data-path="2-2-RSATDOSA.html"><a href="2-2-RSATDOSA.html#large-sample-approximations-to-sampling-distributions"><i class="fa fa-check"></i>Large Sample Approximations to Sampling Distributions</a></li>
</ul></li>
<li class="chapter" data-level="2.3" data-path="2-3-exercises-2.html"><a href="2-3-exercises-2.html"><i class="fa fa-check"></i><b>2.3</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="3-arosur.html"><a href="3-arosur.html"><i class="fa fa-check"></i><b>3</b> A Review of Statistics using R</a><ul>
<li class="chapter" data-level="3.1" data-path="3-1-estimation-of-the-population-mean.html"><a href="3-1-estimation-of-the-population-mean.html"><i class="fa fa-check"></i><b>3.1</b> Estimation of the Population Mean</a></li>
<li class="chapter" data-level="3.2" data-path="3-2-potsm.html"><a href="3-2-potsm.html"><i class="fa fa-check"></i><b>3.2</b> Properties of the Sample Mean</a></li>
<li class="chapter" data-level="3.3" data-path="3-3-hypothesis-tests-concerning-the-population-mean.html"><a href="3-3-hypothesis-tests-concerning-the-population-mean.html"><i class="fa fa-check"></i><b>3.3</b> Hypothesis Tests Concerning the Population Mean</a><ul>
<li class="chapter" data-level="" data-path="3-3-hypothesis-tests-concerning-the-population-mean.html"><a href="3-3-hypothesis-tests-concerning-the-population-mean.html#the-p-value"><i class="fa fa-check"></i>The p-Value</a></li>
<li class="chapter" data-level="" data-path="3-3-hypothesis-tests-concerning-the-population-mean.html"><a href="3-3-hypothesis-tests-concerning-the-population-mean.html#calculating-the-p-value-when-the-standard-deviation-is-known"><i class="fa fa-check"></i>Calculating the p-Value when the Standard Deviation is Known</a></li>
<li class="chapter" data-level="" data-path="3-3-hypothesis-tests-concerning-the-population-mean.html"><a href="3-3-hypothesis-tests-concerning-the-population-mean.html#SVSSDASE"><i class="fa fa-check"></i>Sample Variance, Sample Standard Deviation and Standard Error</a></li>
<li class="chapter" data-level="" data-path="3-3-hypothesis-tests-concerning-the-population-mean.html"><a href="3-3-hypothesis-tests-concerning-the-population-mean.html#calculating-the-p-value-when-the-standard-deviation-is-unknown"><i class="fa fa-check"></i>Calculating the p-value When the Standard Deviation is Unknown</a></li>
<li class="chapter" data-level="" data-path="3-3-hypothesis-tests-concerning-the-population-mean.html"><a href="3-3-hypothesis-tests-concerning-the-population-mean.html#the-t-statistic"><i class="fa fa-check"></i>The t-statistic</a></li>
<li class="chapter" data-level="" data-path="3-3-hypothesis-tests-concerning-the-population-mean.html"><a href="3-3-hypothesis-tests-concerning-the-population-mean.html#hypothesis-testing-with-a-prespecified-significance-level"><i class="fa fa-check"></i>Hypothesis Testing with a Prespecified Significance Level</a></li>
<li class="chapter" data-level="" data-path="3-3-hypothesis-tests-concerning-the-population-mean.html"><a href="3-3-hypothesis-tests-concerning-the-population-mean.html#one-sided-alternatives"><i class="fa fa-check"></i>One-sided Alternatives</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="3-4-confidence-intervals-for-the-population-mean.html"><a href="3-4-confidence-intervals-for-the-population-mean.html"><i class="fa fa-check"></i><b>3.4</b> Confidence Intervals for the Population Mean</a></li>
<li class="chapter" data-level="3.5" data-path="3-5-cmfdp.html"><a href="3-5-cmfdp.html"><i class="fa fa-check"></i><b>3.5</b> Comparing Means from Different Populations</a></li>
<li class="chapter" data-level="3.6" data-path="3-6-aattggoe.html"><a href="3-6-aattggoe.html"><i class="fa fa-check"></i><b>3.6</b> An Application to the Gender Gap of Earnings</a></li>
<li class="chapter" data-level="3.7" data-path="3-7-scatterplots-sample-covariance-and-sample-correlation.html"><a href="3-7-scatterplots-sample-covariance-and-sample-correlation.html"><i class="fa fa-check"></i><b>3.7</b> Scatterplots, Sample Covariance and Sample Correlation</a></li>
<li class="chapter" data-level="3.8" data-path="3-8-exercises-3.html"><a href="3-8-exercises-3.html"><i class="fa fa-check"></i><b>3.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="4-lrwor.html"><a href="4-lrwor.html"><i class="fa fa-check"></i><b>4</b> Linear Regression with One Regressor</a><ul>
<li class="chapter" data-level="4.1" data-path="4-1-simple-linear-regression.html"><a href="4-1-simple-linear-regression.html"><i class="fa fa-check"></i><b>4.1</b> Simple Linear Regression</a></li>
<li class="chapter" data-level="4.2" data-path="4-2-estimating-the-coefficients-of-the-linear-regression-model.html"><a href="4-2-estimating-the-coefficients-of-the-linear-regression-model.html"><i class="fa fa-check"></i><b>4.2</b> Estimating the Coefficients of the Linear Regression Model</a><ul>
<li class="chapter" data-level="" data-path="4-2-estimating-the-coefficients-of-the-linear-regression-model.html"><a href="4-2-estimating-the-coefficients-of-the-linear-regression-model.html#the-ordinary-least-squares-estimator"><i class="fa fa-check"></i>The Ordinary Least Squares Estimator</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="4-3-measures-of-fit.html"><a href="4-3-measures-of-fit.html"><i class="fa fa-check"></i><b>4.3</b> Measures of Fit</a><ul>
<li class="chapter" data-level="" data-path="4-3-measures-of-fit.html"><a href="4-3-measures-of-fit.html#the-coefficient-of-determination"><i class="fa fa-check"></i>The Coefficient of Determination</a></li>
<li class="chapter" data-level="" data-path="4-3-measures-of-fit.html"><a href="4-3-measures-of-fit.html#the-standard-error-of-the-regression"><i class="fa fa-check"></i>The Standard Error of the Regression</a></li>
<li class="chapter" data-level="" data-path="4-3-measures-of-fit.html"><a href="4-3-measures-of-fit.html#application-to-the-test-score-data"><i class="fa fa-check"></i>Application to the Test Score Data</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="4-4-tlsa.html"><a href="4-4-tlsa.html"><i class="fa fa-check"></i><b>4.4</b> The Least Squares Assumptions</a><ul>
<li class="chapter" data-level="" data-path="4-4-tlsa.html"><a href="4-4-tlsa.html#assumption-1-the-error-term-has-conditional-mean-of-zero"><i class="fa fa-check"></i>Assumption 1: The Error Term has Conditional Mean of Zero</a></li>
<li class="chapter" data-level="" data-path="4-4-tlsa.html"><a href="4-4-tlsa.html#assumption-2-independently-and-identically-distributed-data"><i class="fa fa-check"></i>Assumption 2: Independently and Identically Distributed Data</a></li>
<li class="chapter" data-level="" data-path="4-4-tlsa.html"><a href="4-4-tlsa.html#assumption-3-large-outliers-are-unlikely"><i class="fa fa-check"></i>Assumption 3: Large Outliers are Unlikely</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="4-5-tsdotoe.html"><a href="4-5-tsdotoe.html"><i class="fa fa-check"></i><b>4.5</b> The Sampling Distribution of the OLS Estimator</a><ul>
<li class="chapter" data-level="" data-path="4-5-tsdotoe.html"><a href="4-5-tsdotoe.html#simulation-study-1"><i class="fa fa-check"></i>Simulation Study 1</a></li>
<li class="chapter" data-level="" data-path="4-5-tsdotoe.html"><a href="4-5-tsdotoe.html#simulation-study-2"><i class="fa fa-check"></i>Simulation Study 2</a></li>
<li class="chapter" data-level="" data-path="4-5-tsdotoe.html"><a href="4-5-tsdotoe.html#simulation-study-3"><i class="fa fa-check"></i>Simulation Study 3</a></li>
</ul></li>
<li class="chapter" data-level="4.6" data-path="4-6-exercises-4.html"><a href="4-6-exercises-4.html"><i class="fa fa-check"></i><b>4.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="5-htaciitslrm.html"><a href="5-htaciitslrm.html"><i class="fa fa-check"></i><b>5</b> Hypothesis Tests and Confidence Intervals in the Simple Linear Regression Model</a><ul>
<li class="chapter" data-level="5.1" data-path="5-1-testing-two-sided-hypotheses-concerning-the-slope-coefficient.html"><a href="5-1-testing-two-sided-hypotheses-concerning-the-slope-coefficient.html"><i class="fa fa-check"></i><b>5.1</b> Testing Two-Sided Hypotheses Concerning the Slope Coefficient</a></li>
<li class="chapter" data-level="5.2" data-path="5-2-cifrc.html"><a href="5-2-cifrc.html"><i class="fa fa-check"></i><b>5.2</b> Confidence Intervals for Regression Coefficients</a><ul>
<li class="chapter" data-level="" data-path="5-2-cifrc.html"><a href="5-2-cifrc.html#simulation-study-confidence-intervals"><i class="fa fa-check"></i>Simulation Study: Confidence Intervals</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="5-3-rwxiabv.html"><a href="5-3-rwxiabv.html"><i class="fa fa-check"></i><b>5.3</b> Regression when X is a Binary Variable</a></li>
<li class="chapter" data-level="5.4" data-path="5-4-hah.html"><a href="5-4-hah.html"><i class="fa fa-check"></i><b>5.4</b> Heteroskedasticity and Homoskedasticity</a><ul>
<li class="chapter" data-level="" data-path="5-4-hah.html"><a href="5-4-hah.html#a-real-world-example-for-heteroskedasticity"><i class="fa fa-check"></i>A Real-World Example for Heteroskedasticity</a></li>
<li class="chapter" data-level="" data-path="5-4-hah.html"><a href="5-4-hah.html#should-we-care-about-heteroskedasticity"><i class="fa fa-check"></i>Should We Care About Heteroskedasticity?</a></li>
<li class="chapter" data-level="" data-path="5-4-hah.html"><a href="5-4-hah.html#computation-of-heteroskedasticity-robust-standard-errors"><i class="fa fa-check"></i>Computation of Heteroskedasticity-Robust Standard Errors</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="5-5-the-gauss-markov-theorem.html"><a href="5-5-the-gauss-markov-theorem.html"><i class="fa fa-check"></i><b>5.5</b> The Gauss-Markov Theorem</a><ul>
<li class="chapter" data-level="" data-path="5-5-the-gauss-markov-theorem.html"><a href="5-5-the-gauss-markov-theorem.html#simulation-study-blue-estimator"><i class="fa fa-check"></i>Simulation Study: BLUE Estimator</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="5-6-using-the-t-statistic-in-regression-when-the-sample-size-is-small.html"><a href="5-6-using-the-t-statistic-in-regression-when-the-sample-size-is-small.html"><i class="fa fa-check"></i><b>5.6</b> Using the t-Statistic in Regression When the Sample Size Is Small</a></li>
<li class="chapter" data-level="5.7" data-path="5-7-exercises-5.html"><a href="5-7-exercises-5.html"><i class="fa fa-check"></i><b>5.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="6-rmwmr.html"><a href="6-rmwmr.html"><i class="fa fa-check"></i><b>6</b> Regression Models with Multiple Regressors</a><ul>
<li class="chapter" data-level="6.1" data-path="6-1-omitted-variable-bias.html"><a href="6-1-omitted-variable-bias.html"><i class="fa fa-check"></i><b>6.1</b> Omitted Variable Bias</a></li>
<li class="chapter" data-level="6.2" data-path="6-2-tmrm.html"><a href="6-2-tmrm.html"><i class="fa fa-check"></i><b>6.2</b> The Multiple Regression Model</a></li>
<li class="chapter" data-level="6.3" data-path="6-3-mofimr.html"><a href="6-3-mofimr.html"><i class="fa fa-check"></i><b>6.3</b> Measures of Fit in Multiple Regression</a></li>
<li class="chapter" data-level="6.4" data-path="6-4-ols-assumptions-in-multiple-regression.html"><a href="6-4-ols-assumptions-in-multiple-regression.html"><i class="fa fa-check"></i><b>6.4</b> OLS Assumptions in Multiple Regression</a><ul>
<li class="chapter" data-level="" data-path="6-4-ols-assumptions-in-multiple-regression.html"><a href="6-4-ols-assumptions-in-multiple-regression.html#multicollinearity"><i class="fa fa-check"></i>Multicollinearity</a></li>
<li class="chapter" data-level="" data-path="6-4-ols-assumptions-in-multiple-regression.html"><a href="6-4-ols-assumptions-in-multiple-regression.html#simulation-study-imperfect-multicollinearity"><i class="fa fa-check"></i>Simulation Study: Imperfect Multicollinearity</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="6-5-the-distribution-of-the-ols-estimators-in-multiple-regression.html"><a href="6-5-the-distribution-of-the-ols-estimators-in-multiple-regression.html"><i class="fa fa-check"></i><b>6.5</b> The Distribution of the OLS Estimators in Multiple Regression</a></li>
<li class="chapter" data-level="6.6" data-path="6-6-exercises-6.html"><a href="6-6-exercises-6.html"><i class="fa fa-check"></i><b>6.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="7-htaciimr.html"><a href="7-htaciimr.html"><i class="fa fa-check"></i><b>7</b> Hypothesis Tests and Confidence Intervals in Multiple Regression</a><ul>
<li class="chapter" data-level="7.1" data-path="7-1-hypothesis-tests-and-confidence-intervals-for-a-single-coefficient.html"><a href="7-1-hypothesis-tests-and-confidence-intervals-for-a-single-coefficient.html"><i class="fa fa-check"></i><b>7.1</b> Hypothesis Tests and Confidence Intervals for a Single Coefficient</a></li>
<li class="chapter" data-level="7.2" data-path="7-2-an-application-to-test-scores-and-the-student-teacher-ratio.html"><a href="7-2-an-application-to-test-scores-and-the-student-teacher-ratio.html"><i class="fa fa-check"></i><b>7.2</b> An Application to Test Scores and the Student-Teacher Ratio</a><ul>
<li class="chapter" data-level="" data-path="7-2-an-application-to-test-scores-and-the-student-teacher-ratio.html"><a href="7-2-an-application-to-test-scores-and-the-student-teacher-ratio.html#another-augmentation-of-the-model"><i class="fa fa-check"></i>Another Augmentation of the Model</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="7-3-joint-hypothesis-testing-using-the-f-statistic.html"><a href="7-3-joint-hypothesis-testing-using-the-f-statistic.html"><i class="fa fa-check"></i><b>7.3</b> Joint Hypothesis Testing Using the F-Statistic</a></li>
<li class="chapter" data-level="7.4" data-path="7-4-confidence-sets-for-multiple-coefficients.html"><a href="7-4-confidence-sets-for-multiple-coefficients.html"><i class="fa fa-check"></i><b>7.4</b> Confidence Sets for Multiple Coefficients</a></li>
<li class="chapter" data-level="7.5" data-path="7-5-model-specification-for-multiple-regression.html"><a href="7-5-model-specification-for-multiple-regression.html"><i class="fa fa-check"></i><b>7.5</b> Model Specification for Multiple Regression</a><ul>
<li class="chapter" data-level="" data-path="7-5-model-specification-for-multiple-regression.html"><a href="7-5-model-specification-for-multiple-regression.html#model-specification-in-theory-and-in-practice"><i class="fa fa-check"></i>Model Specification in Theory and in Practice</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="7-6-analysis-of-the-test-score-data-set.html"><a href="7-6-analysis-of-the-test-score-data-set.html"><i class="fa fa-check"></i><b>7.6</b> Analysis of the Test Score Data Set</a></li>
<li class="chapter" data-level="7.7" data-path="7-7-exercises-7.html"><a href="7-7-exercises-7.html"><i class="fa fa-check"></i><b>7.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="8-nrf.html"><a href="8-nrf.html"><i class="fa fa-check"></i><b>8</b> Nonlinear Regression Functions</a><ul>
<li class="chapter" data-level="8.1" data-path="8-1-a-general-strategy-for-modelling-nonlinear-regression-functions.html"><a href="8-1-a-general-strategy-for-modelling-nonlinear-regression-functions.html"><i class="fa fa-check"></i><b>8.1</b> A General Strategy for Modelling Nonlinear Regression Functions</a></li>
<li class="chapter" data-level="8.2" data-path="8-2-nfoasiv.html"><a href="8-2-nfoasiv.html"><i class="fa fa-check"></i><b>8.2</b> Nonlinear Functions of a Single Independent Variable</a><ul>
<li class="chapter" data-level="" data-path="8-2-nfoasiv.html"><a href="8-2-nfoasiv.html#polynomials"><i class="fa fa-check"></i>Polynomials</a></li>
<li class="chapter" data-level="" data-path="8-2-nfoasiv.html"><a href="8-2-nfoasiv.html#logarithms"><i class="fa fa-check"></i>Logarithms</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="8-3-interactions-between-independent-variables.html"><a href="8-3-interactions-between-independent-variables.html"><i class="fa fa-check"></i><b>8.3</b> Interactions Between Independent Variables</a></li>
<li class="chapter" data-level="8.4" data-path="8-4-nonlinear-effects-on-test-scores-of-the-student-teacher-ratio.html"><a href="8-4-nonlinear-effects-on-test-scores-of-the-student-teacher-ratio.html"><i class="fa fa-check"></i><b>8.4</b> Nonlinear Effects on Test Scores of the Student-Teacher Ratio</a></li>
<li class="chapter" data-level="8.5" data-path="8-5-exercises-8.html"><a href="8-5-exercises-8.html"><i class="fa fa-check"></i><b>8.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="9-asbomr.html"><a href="9-asbomr.html"><i class="fa fa-check"></i><b>9</b> Assessing Studies Based on Multiple Regression</a><ul>
<li class="chapter" data-level="9.1" data-path="9-1-internal-and-external-validity.html"><a href="9-1-internal-and-external-validity.html"><i class="fa fa-check"></i><b>9.1</b> Internal and External Validity</a></li>
<li class="chapter" data-level="9.2" data-path="9-2-ttivomra.html"><a href="9-2-ttivomra.html"><i class="fa fa-check"></i><b>9.2</b> Threats to Internal Validity of Multiple Regression Analysis</a></li>
<li class="chapter" data-level="9.3" data-path="9-3-internal-and-external-validity-when-the-regression-is-used-for-forecasting.html"><a href="9-3-internal-and-external-validity-when-the-regression-is-used-for-forecasting.html"><i class="fa fa-check"></i><b>9.3</b> Internal and External Validity when the Regression is Used for Forecasting</a></li>
<li class="chapter" data-level="9.4" data-path="9-4-etsacs.html"><a href="9-4-etsacs.html"><i class="fa fa-check"></i><b>9.4</b> Example: Test Scores and Class Size</a></li>
<li class="chapter" data-level="9.5" data-path="9-5-exercises-9.html"><a href="9-5-exercises-9.html"><i class="fa fa-check"></i><b>9.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="10-rwpd.html"><a href="10-rwpd.html"><i class="fa fa-check"></i><b>10</b> Regression with Panel Data</a><ul>
<li class="chapter" data-level="10.1" data-path="10-1-panel-data.html"><a href="10-1-panel-data.html"><i class="fa fa-check"></i><b>10.1</b> Panel Data</a></li>
<li class="chapter" data-level="10.2" data-path="10-2-PDWTTP.html"><a href="10-2-PDWTTP.html"><i class="fa fa-check"></i><b>10.2</b> Panel Data with Two Time Periods: “Before and After” Comparisons</a></li>
<li class="chapter" data-level="10.3" data-path="10-3-fixed-effects-regression.html"><a href="10-3-fixed-effects-regression.html"><i class="fa fa-check"></i><b>10.3</b> Fixed Effects Regression</a><ul>
<li class="chapter" data-level="" data-path="10-3-fixed-effects-regression.html"><a href="10-3-fixed-effects-regression.html#estimation-and-inference"><i class="fa fa-check"></i>Estimation and Inference</a></li>
<li class="chapter" data-level="" data-path="10-3-fixed-effects-regression.html"><a href="10-3-fixed-effects-regression.html#application-to-traffic-deaths"><i class="fa fa-check"></i>Application to Traffic Deaths</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="10-4-regression-with-time-fixed-effects.html"><a href="10-4-regression-with-time-fixed-effects.html"><i class="fa fa-check"></i><b>10.4</b> Regression with Time Fixed Effects</a></li>
<li class="chapter" data-level="10.5" data-path="10-5-tferaaseffer.html"><a href="10-5-tferaaseffer.html"><i class="fa fa-check"></i><b>10.5</b> The Fixed Effects Regression Assumptions and Standard Errors for Fixed Effects Regression</a></li>
<li class="chapter" data-level="10.6" data-path="10-6-drunk-driving-laws-and-traffic-deaths.html"><a href="10-6-drunk-driving-laws-and-traffic-deaths.html"><i class="fa fa-check"></i><b>10.6</b> Drunk Driving Laws and Traffic Deaths</a></li>
<li class="chapter" data-level="10.7" data-path="10-7-exercises-10.html"><a href="10-7-exercises-10.html"><i class="fa fa-check"></i><b>10.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="11-rwabdv.html"><a href="11-rwabdv.html"><i class="fa fa-check"></i><b>11</b> Regression with a Binary Dependent Variable</a><ul>
<li class="chapter" data-level="11.1" data-path="11-1-binary-dependent-variables-and-the-linear-probability-model.html"><a href="11-1-binary-dependent-variables-and-the-linear-probability-model.html"><i class="fa fa-check"></i><b>11.1</b> Binary Dependent Variables and the Linear Probability Model</a></li>
<li class="chapter" data-level="11.2" data-path="11-2-palr.html"><a href="11-2-palr.html"><i class="fa fa-check"></i><b>11.2</b> Probit and Logit Regression</a><ul>
<li class="chapter" data-level="" data-path="11-2-palr.html"><a href="11-2-palr.html#probit-regression"><i class="fa fa-check"></i>Probit Regression</a></li>
<li class="chapter" data-level="" data-path="11-2-palr.html"><a href="11-2-palr.html#logit-regression"><i class="fa fa-check"></i>Logit Regression</a></li>
</ul></li>
<li class="chapter" data-level="11.3" data-path="11-3-estimation-and-inference-in-the-logit-and-probit-models.html"><a href="11-3-estimation-and-inference-in-the-logit-and-probit-models.html"><i class="fa fa-check"></i><b>11.3</b> Estimation and Inference in the Logit and Probit Models</a></li>
<li class="chapter" data-level="11.4" data-path="11-4-application-to-the-boston-hmda-data.html"><a href="11-4-application-to-the-boston-hmda-data.html"><i class="fa fa-check"></i><b>11.4</b> Application to the Boston HMDA Data</a></li>
<li class="chapter" data-level="11.5" data-path="11-5-exercises-11.html"><a href="11-5-exercises-11.html"><i class="fa fa-check"></i><b>11.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="12-ivr.html"><a href="12-ivr.html"><i class="fa fa-check"></i><b>12</b> Instrumental Variables Regression</a><ul>
<li class="chapter" data-level="12.1" data-path="12-1-TIVEWASRAASI.html"><a href="12-1-TIVEWASRAASI.html"><i class="fa fa-check"></i><b>12.1</b> The IV Estimator with a Single Regressor and a Single Instrument</a></li>
<li class="chapter" data-level="12.2" data-path="12-2-TGIVRM.html"><a href="12-2-TGIVRM.html"><i class="fa fa-check"></i><b>12.2</b> The General IV Regression Model</a></li>
<li class="chapter" data-level="12.3" data-path="12-3-civ.html"><a href="12-3-civ.html"><i class="fa fa-check"></i><b>12.3</b> Checking Instrument Validity</a></li>
<li class="chapter" data-level="12.4" data-path="12-4-attdfc.html"><a href="12-4-attdfc.html"><i class="fa fa-check"></i><b>12.4</b> Application to the Demand for Cigarettes</a></li>
<li class="chapter" data-level="12.5" data-path="12-5-where-do-valid-instruments-come-from.html"><a href="12-5-where-do-valid-instruments-come-from.html"><i class="fa fa-check"></i><b>12.5</b> Where Do Valid Instruments Come From?</a></li>
<li class="chapter" data-level="12.6" data-path="12-6-exercises-12.html"><a href="12-6-exercises-12.html"><i class="fa fa-check"></i><b>12.6</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="13-eaqe.html"><a href="13-eaqe.html"><i class="fa fa-check"></i><b>13</b> Experiments and Quasi-Experiments</a><ul>
<li class="chapter" data-level="13.1" data-path="13-1-poceaie.html"><a href="13-1-poceaie.html"><i class="fa fa-check"></i><b>13.1</b> Potential Outcomes, Causal Effects and Idealized Experiments</a></li>
<li class="chapter" data-level="13.2" data-path="13-2-threats-to-validity-of-experiments.html"><a href="13-2-threats-to-validity-of-experiments.html"><i class="fa fa-check"></i><b>13.2</b> Threats to Validity of Experiments</a></li>
<li class="chapter" data-level="13.3" data-path="13-3-experimental-estimates-of-the-effect-of-class-size-reductions.html"><a href="13-3-experimental-estimates-of-the-effect-of-class-size-reductions.html"><i class="fa fa-check"></i><b>13.3</b> Experimental Estimates of the Effect of Class Size Reductions</a><ul>
<li class="chapter" data-level="" data-path="13-3-experimental-estimates-of-the-effect-of-class-size-reductions.html"><a href="13-3-experimental-estimates-of-the-effect-of-class-size-reductions.html#experimental-design-and-the-data-set"><i class="fa fa-check"></i>Experimental Design and the Data Set</a></li>
<li class="chapter" data-level="" data-path="13-3-experimental-estimates-of-the-effect-of-class-size-reductions.html"><a href="13-3-experimental-estimates-of-the-effect-of-class-size-reductions.html#analysis-of-the-star-data"><i class="fa fa-check"></i>Analysis of the STAR Data</a></li>
</ul></li>
<li class="chapter" data-level="13.4" data-path="13-4-qe.html"><a href="13-4-qe.html"><i class="fa fa-check"></i><b>13.4</b> Quasi Experiments</a><ul>
<li class="chapter" data-level="" data-path="13-4-qe.html"><a href="13-4-qe.html#the-differences-in-differences-estimator"><i class="fa fa-check"></i>The Differences-in-Differences Estimator</a></li>
<li class="chapter" data-level="" data-path="13-4-qe.html"><a href="13-4-qe.html#regression-discontinuity-estimators"><i class="fa fa-check"></i>Regression Discontinuity Estimators</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="13-5-exercises-13.html"><a href="13-5-exercises-13.html"><i class="fa fa-check"></i><b>13.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="14-ittsraf.html"><a href="14-ittsraf.html"><i class="fa fa-check"></i><b>14</b> Introduction to Time Series Regression and Forecasting</a><ul>
<li class="chapter" data-level="14.1" data-path="14-1-using-regression-models-for-forecasting.html"><a href="14-1-using-regression-models-for-forecasting.html"><i class="fa fa-check"></i><b>14.1</b> Using Regression Models for Forecasting</a></li>
<li class="chapter" data-level="14.2" data-path="14-2-tsdasc.html"><a href="14-2-tsdasc.html"><i class="fa fa-check"></i><b>14.2</b> Time Series Data and Serial Correlation</a><ul>
<li class="chapter" data-level="" data-path="14-2-tsdasc.html"><a href="14-2-tsdasc.html#notation-lags-differences-logarithms-and-growth-rates"><i class="fa fa-check"></i>Notation, Lags, Differences, Logarithms and Growth Rates</a></li>
</ul></li>
<li class="chapter" data-level="14.3" data-path="14-3-autoregressions.html"><a href="14-3-autoregressions.html"><i class="fa fa-check"></i><b>14.3</b> Autoregressions</a><ul>
<li><a href="14-3-autoregressions.html#autoregressive-models-of-order-p">Autoregressive Models of Order <span class="math inline">\(p\)</span></a></li>
</ul></li>
<li class="chapter" data-level="14.4" data-path="14-4-cybtmpi.html"><a href="14-4-cybtmpi.html"><i class="fa fa-check"></i><b>14.4</b> Can You Beat the Market? (Part I)</a></li>
<li class="chapter" data-level="14.5" data-path="14-5-apatadlm.html"><a href="14-5-apatadlm.html"><i class="fa fa-check"></i><b>14.5</b> Additional Predictors and The ADL Model</a><ul>
<li class="chapter" data-level="" data-path="14-5-apatadlm.html"><a href="14-5-apatadlm.html#forecast-uncertainty-and-forecast-intervals"><i class="fa fa-check"></i>Forecast Uncertainty and Forecast Intervals</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="14-6-llsuic.html"><a href="14-6-llsuic.html"><i class="fa fa-check"></i><b>14.6</b> Lag Length Selection Using Information Criteria</a></li>
<li class="chapter" data-level="14.7" data-path="14-7-nit.html"><a href="14-7-nit.html"><i class="fa fa-check"></i><b>14.7</b> Nonstationarity I: Trends</a></li>
<li class="chapter" data-level="14.8" data-path="14-8-niib.html"><a href="14-8-niib.html"><i class="fa fa-check"></i><b>14.8</b> Nonstationarity II: Breaks</a></li>
<li class="chapter" data-level="14.9" data-path="14-9-can-you-beat-the-market-part-ii.html"><a href="14-9-can-you-beat-the-market-part-ii.html"><i class="fa fa-check"></i><b>14.9</b> Can You Beat the Market? (Part II)</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="15-eodce.html"><a href="15-eodce.html"><i class="fa fa-check"></i><b>15</b> Estimation of Dynamic Causal Effects</a><ul>
<li class="chapter" data-level="15.1" data-path="15-1-the-orange-juice-data.html"><a href="15-1-the-orange-juice-data.html"><i class="fa fa-check"></i><b>15.1</b> The Orange Juice Data</a></li>
<li class="chapter" data-level="15.2" data-path="15-2-dynamic-causal-effects.html"><a href="15-2-dynamic-causal-effects.html"><i class="fa fa-check"></i><b>15.2</b> Dynamic Causal Effects</a></li>
<li class="chapter" data-level="15.3" data-path="15-3-dynamic-multipliers-and-cumulative-dynamic-multipliers.html"><a href="15-3-dynamic-multipliers-and-cumulative-dynamic-multipliers.html"><i class="fa fa-check"></i><b>15.3</b> Dynamic Multipliers and Cumulative Dynamic Multipliers</a></li>
<li class="chapter" data-level="15.4" data-path="15-4-hac-standard-errors.html"><a href="15-4-hac-standard-errors.html"><i class="fa fa-check"></i><b>15.4</b> HAC Standard Errors</a></li>
<li class="chapter" data-level="15.5" data-path="15-5-estimation-of-dynamic-causal-effects-with-strictly-exogeneous-regressors.html"><a href="15-5-estimation-of-dynamic-causal-effects-with-strictly-exogeneous-regressors.html"><i class="fa fa-check"></i><b>15.5</b> Estimation of Dynamic Causal Effects with Strictly Exogeneous Regressors</a></li>
<li class="chapter" data-level="15.6" data-path="15-6-orange-juice-prices-and-cold-weather.html"><a href="15-6-orange-juice-prices-and-cold-weather.html"><i class="fa fa-check"></i><b>15.6</b> Orange Juice Prices and Cold Weather</a></li>
</ul></li>
<li class="chapter" data-level="16" data-path="16-atitsr.html"><a href="16-atitsr.html"><i class="fa fa-check"></i><b>16</b> Additional Topics in Time Series Regression</a><ul>
<li class="chapter" data-level="16.1" data-path="16-1-vector-autoregressions.html"><a href="16-1-vector-autoregressions.html"><i class="fa fa-check"></i><b>16.1</b> Vector Autoregressions</a></li>
<li class="chapter" data-level="16.2" data-path="16-2-ooiatdfglsurt.html"><a href="16-2-ooiatdfglsurt.html"><i class="fa fa-check"></i><b>16.2</b> Orders of Integration and the DF-GLS Unit Root Test</a></li>
<li class="chapter" data-level="16.3" data-path="16-3-cointegration.html"><a href="16-3-cointegration.html"><i class="fa fa-check"></i><b>16.3</b> Cointegration</a></li>
<li class="chapter" data-level="16.4" data-path="16-4-volatility-clustering-and-autoregressive-conditional-heteroskedasticity.html"><a href="16-4-volatility-clustering-and-autoregressive-conditional-heteroskedasticity.html"><i class="fa fa-check"></i><b>16.4</b> Volatility Clustering and Autoregressive Conditional Heteroskedasticity</a><ul>
<li class="chapter" data-level="" data-path="16-4-volatility-clustering-and-autoregressive-conditional-heteroskedasticity.html"><a href="16-4-volatility-clustering-and-autoregressive-conditional-heteroskedasticity.html#arch-and-garch-models"><i class="fa fa-check"></i>ARCH and GARCH Models</a></li>
<li class="chapter" data-level="" data-path="16-4-volatility-clustering-and-autoregressive-conditional-heteroskedasticity.html"><a href="16-4-volatility-clustering-and-autoregressive-conditional-heteroskedasticity.html#application-to-stock-price-volatility"><i class="fa fa-check"></i>Application to Stock Price Volatility</a></li>
<li class="chapter" data-level="" data-path="8-4-nonlinear-effects-on-test-scores-of-the-student-teacher-ratio.html"><a href="8-4-nonlinear-effects-on-test-scores-of-the-student-teacher-ratio.html#summary"><i class="fa fa-check"></i>Summary</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Advanced Regression Analysis</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="nonlinear-effects-on-test-scores-of-the-student-teacher-ratio" class="section level2">
<h2><span class="header-section-number">8.4</span> Nonlinear Effects on Test Scores of the Student-Teacher Ratio</h2>
<p>In this section we will discuss three specific questions about the relationship between test scores and the student-teacher ratio:</p>
<ol style="list-style-type: decimal">
<li><p>Does the effect on test scores of decreasing the student-teacher ratio depend on the fraction of English learners when we control for economic idiosyncrasies of the different districts?</p></li>
<li><p>Does this effect depend on the the student-teacher ratio?</p></li>
<li><p><em>How strong</em> is the effect of decreasing the student-teacher ratio (by two students per teacher) if we take into account economic characteristics and nonlinearities?</p></li>
</ol>
<p>Too answer these questions we consider a total of seven models, some of which are nonlinear regression specifications of the types that have been discussed before. As measures for the students’ economic backgrounds, we additionally consider the regressors <span class="math inline">\(lunch\)</span> and <span class="math inline">\(\ln(income)\)</span>. We use the logarithm of <span class="math inline">\(income\)</span> because the analysis in Chapter <a href="8-2-nfoasiv.html#nfoasiv">8.2</a> showed that the nonlinear relationship between <span class="math inline">\(income\)</span> and <span class="math inline">\(TestScores\)</span> is approximately logarithmic. We do not include expenditure per pupil (<span class="math inline">\(expenditure\)</span>) because doing so would imply that expenditure varies with the student-teacher ratio (see Chapter 7.2 of the book for a detailed argument).</p>
<div id="nonlinear-regression-models-of-test-scores" class="section level4 unnumbered">
<h4>Nonlinear Regression Models of Test Scores</h4>
<p>The considered model specifications are:</p>
<p><span class="math display">\[\begin{align}
 TestScore_i =&amp; \beta_0 + \beta_1 size_i + \beta_4 english_i + \beta_9 lunch_i + u_i \\
 TestScore_i =&amp; \beta_0 + \beta_1 size_i + \beta_4 english_i + \beta_9 lunch_i + \beta_{10} \ln(income_i) + u_i \\
  TestScore_i =&amp; \beta_0 + \beta_1 size_i + \beta_5 HiEL_i + \beta_6 (HiEL_i\times size_i) + u_i \\
  TestScore_i =&amp; \beta_0 + \beta_1 size_i + \beta_5 HiEL_i + \beta_6 (HiEL_i\times size_i) + \beta_9 lunch_i + \beta_{10} \ln(income_i) + u_i \\
  TestScore_i =&amp; \beta_0 + \beta_1 size_i + \beta_2 size_i^2 + \beta_5 HiEL_i + \beta_9 lunch_i + \beta_{10} \ln(income_i) + u_i \\
  TestScore_i =&amp; \beta_0 + \beta_1 size_i + \beta_2 size_i^2 + \beta_3 size_i^3 + \beta_5 HiEL_i + \beta_6 (HiEL\times size) \\  &amp;+ \beta_7 (HiEL_i\times size_i^2) + \beta_8 (HiEL_i\times size_i^3) + \beta_9 lunch_i + \beta_{10} \ln(income_i) + u_i \\
  TestScore_i =&amp; \beta_0 + \beta_1 size_i + \beta_2 size_i^2 + \beta_3 size_i^3 + \beta_4 english + \beta_9 lunch_i + \beta_{10} \ln(income_i) + u_i
\end{align}\]</span></p>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb208-1" data-line-number="1"><span class="co"># estimate all models</span></a>
<a class="sourceLine" id="cb208-2" data-line-number="2">TestScore_mod1 &lt;-<span class="st"> </span><span class="kw">lm</span>(score <span class="op">~</span><span class="st"> </span>size <span class="op">+</span><span class="st"> </span>english <span class="op">+</span><span class="st"> </span>lunch, <span class="dt">data =</span> CASchools)</a>
<a class="sourceLine" id="cb208-3" data-line-number="3"></a>
<a class="sourceLine" id="cb208-4" data-line-number="4">TestScore_mod2 &lt;-<span class="st"> </span><span class="kw">lm</span>(score <span class="op">~</span><span class="st"> </span>size <span class="op">+</span><span class="st"> </span>english <span class="op">+</span><span class="st"> </span>lunch <span class="op">+</span><span class="st"> </span><span class="kw">log</span>(income), <span class="dt">data =</span> CASchools)</a>
<a class="sourceLine" id="cb208-5" data-line-number="5"></a>
<a class="sourceLine" id="cb208-6" data-line-number="6">TestScore_mod3 &lt;-<span class="st"> </span><span class="kw">lm</span>(score <span class="op">~</span><span class="st"> </span>size <span class="op">+</span><span class="st"> </span>HiEL <span class="op">+</span><span class="st"> </span>HiEL<span class="op">:</span>size, <span class="dt">data =</span> CASchools)</a>
<a class="sourceLine" id="cb208-7" data-line-number="7"></a>
<a class="sourceLine" id="cb208-8" data-line-number="8">TestScore_mod4 &lt;-<span class="st"> </span><span class="kw">lm</span>(score <span class="op">~</span><span class="st"> </span>size <span class="op">+</span><span class="st"> </span>HiEL <span class="op">+</span><span class="st"> </span>HiEL<span class="op">:</span>size <span class="op">+</span><span class="st"> </span>lunch <span class="op">+</span><span class="st"> </span><span class="kw">log</span>(income), </a>
<a class="sourceLine" id="cb208-9" data-line-number="9">    <span class="dt">data =</span> CASchools)</a>
<a class="sourceLine" id="cb208-10" data-line-number="10"></a>
<a class="sourceLine" id="cb208-11" data-line-number="11">TestScore_mod5 &lt;-<span class="st"> </span><span class="kw">lm</span>(score <span class="op">~</span><span class="st"> </span>size <span class="op">+</span><span class="st"> </span><span class="kw">I</span>(size<span class="op">^</span><span class="dv">2</span>) <span class="op">+</span><span class="st"> </span><span class="kw">I</span>(size<span class="op">^</span><span class="dv">3</span>) <span class="op">+</span><span class="st"> </span>HiEL <span class="op">+</span><span class="st"> </span>lunch <span class="op">+</span><span class="st"> </span><span class="kw">log</span>(income), </a>
<a class="sourceLine" id="cb208-12" data-line-number="12">    <span class="dt">data =</span> CASchools)</a>
<a class="sourceLine" id="cb208-13" data-line-number="13"></a>
<a class="sourceLine" id="cb208-14" data-line-number="14">TestScore_mod6 &lt;-<span class="st"> </span><span class="kw">lm</span>(score <span class="op">~</span><span class="st"> </span>size <span class="op">+</span><span class="st"> </span><span class="kw">I</span>(size<span class="op">^</span><span class="dv">2</span>) <span class="op">+</span><span class="st"> </span><span class="kw">I</span>(size<span class="op">^</span><span class="dv">3</span>) <span class="op">+</span><span class="st"> </span>HiEL <span class="op">+</span><span class="st"> </span>HiEL<span class="op">:</span>size <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb208-15" data-line-number="15"><span class="st">    </span>HiEL<span class="op">:</span><span class="kw">I</span>(size<span class="op">^</span><span class="dv">2</span>) <span class="op">+</span><span class="st"> </span>HiEL<span class="op">:</span><span class="kw">I</span>(size<span class="op">^</span><span class="dv">3</span>) <span class="op">+</span><span class="st"> </span>lunch <span class="op">+</span><span class="st"> </span><span class="kw">log</span>(income), <span class="dt">data =</span> CASchools)</a>
<a class="sourceLine" id="cb208-16" data-line-number="16"></a>
<a class="sourceLine" id="cb208-17" data-line-number="17">TestScore_mod7 &lt;-<span class="st"> </span><span class="kw">lm</span>(score <span class="op">~</span><span class="st"> </span>size <span class="op">+</span><span class="st"> </span><span class="kw">I</span>(size<span class="op">^</span><span class="dv">2</span>) <span class="op">+</span><span class="st"> </span><span class="kw">I</span>(size<span class="op">^</span><span class="dv">3</span>) <span class="op">+</span><span class="st"> </span>english <span class="op">+</span><span class="st"> </span>lunch <span class="op">+</span><span class="st"> </span></a>
<a class="sourceLine" id="cb208-18" data-line-number="18"><span class="st">    </span><span class="kw">log</span>(income), <span class="dt">data =</span> CASchools)</a></code></pre></div>
<p>We may use <tt>summary()</tt> to assess the models’ fit. Using <tt>stargazer()</tt> we may also obtain a tabular representation of all regression outputs and which is more convenient for comparison of the models.</p>
<div class="sourceCode" id="cb209"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb209-1" data-line-number="1"><span class="co"># gather robust standard errors in a list</span></a>
<a class="sourceLine" id="cb209-2" data-line-number="2">rob_se &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">sqrt</span>(<span class="kw">diag</span>(<span class="kw">vcovHC</span>(TestScore_mod1, <span class="dt">type =</span> <span class="st">&quot;HC1&quot;</span>))),</a>
<a class="sourceLine" id="cb209-3" data-line-number="3">               <span class="kw">sqrt</span>(<span class="kw">diag</span>(<span class="kw">vcovHC</span>(TestScore_mod2, <span class="dt">type =</span> <span class="st">&quot;HC1&quot;</span>))),</a>
<a class="sourceLine" id="cb209-4" data-line-number="4">               <span class="kw">sqrt</span>(<span class="kw">diag</span>(<span class="kw">vcovHC</span>(TestScore_mod3, <span class="dt">type =</span> <span class="st">&quot;HC1&quot;</span>))),</a>
<a class="sourceLine" id="cb209-5" data-line-number="5">               <span class="kw">sqrt</span>(<span class="kw">diag</span>(<span class="kw">vcovHC</span>(TestScore_mod4, <span class="dt">type =</span> <span class="st">&quot;HC1&quot;</span>))),</a>
<a class="sourceLine" id="cb209-6" data-line-number="6">               <span class="kw">sqrt</span>(<span class="kw">diag</span>(<span class="kw">vcovHC</span>(TestScore_mod5, <span class="dt">type =</span> <span class="st">&quot;HC1&quot;</span>))),</a>
<a class="sourceLine" id="cb209-7" data-line-number="7">               <span class="kw">sqrt</span>(<span class="kw">diag</span>(<span class="kw">vcovHC</span>(TestScore_mod6, <span class="dt">type =</span> <span class="st">&quot;HC1&quot;</span>))),</a>
<a class="sourceLine" id="cb209-8" data-line-number="8">               <span class="kw">sqrt</span>(<span class="kw">diag</span>(<span class="kw">vcovHC</span>(TestScore_mod7, <span class="dt">type =</span> <span class="st">&quot;HC1&quot;</span>))))</a>
<a class="sourceLine" id="cb209-9" data-line-number="9"></a>
<a class="sourceLine" id="cb209-10" data-line-number="10"><span class="co"># generate a LaTeX table of regression outputs</span></a>
<a class="sourceLine" id="cb209-11" data-line-number="11"><span class="kw">stargazer</span>(TestScore_mod1, </a>
<a class="sourceLine" id="cb209-12" data-line-number="12">          TestScore_mod2, </a>
<a class="sourceLine" id="cb209-13" data-line-number="13">          TestScore_mod3, </a>
<a class="sourceLine" id="cb209-14" data-line-number="14">          TestScore_mod4, </a>
<a class="sourceLine" id="cb209-15" data-line-number="15">          TestScore_mod5, </a>
<a class="sourceLine" id="cb209-16" data-line-number="16">          TestScore_mod6, </a>
<a class="sourceLine" id="cb209-17" data-line-number="17">          TestScore_mod7,</a>
<a class="sourceLine" id="cb209-18" data-line-number="18">          <span class="dt">digits =</span> <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb209-19" data-line-number="19">          <span class="dt">dep.var.caption =</span> <span class="st">&quot;Dependent Variable: Test Score&quot;</span>,</a>
<a class="sourceLine" id="cb209-20" data-line-number="20">          <span class="dt">se =</span> rob_se,</a>
<a class="sourceLine" id="cb209-21" data-line-number="21">          <span class="dt">column.labels =</span> <span class="kw">c</span>(<span class="st">&quot;(1)&quot;</span>, <span class="st">&quot;(2)&quot;</span>, <span class="st">&quot;(3)&quot;</span>, <span class="st">&quot;(4)&quot;</span>, <span class="st">&quot;(5)&quot;</span>, <span class="st">&quot;(6)&quot;</span>, <span class="st">&quot;(7)&quot;</span>))</a></code></pre></div>



<table style="text-align:center"><tr><td colspan="8" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align:left"></td><td colspan="7">Dependent Variable: Test Score</td></tr>
<tr><td></td><td colspan="7" style="border-bottom: 1px solid black"></td></tr>
<tr><td style="text-align:left"></td><td colspan="7">score</td></tr>
<tr><td style="text-align:left"></td><td>(1)</td><td>(2)</td><td>(3)</td><td>(4)</td><td>(5)</td><td>(6)</td><td>(7)</td></tr>
<tr><td colspan="8" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align:left">size</td><td>-0.998<sup>***</sup></td><td>-0.734<sup>***</sup></td><td>-0.968</td><td>-0.531</td><td>64.339<sup>***</sup></td><td>83.702<sup>***</sup></td><td>65.285<sup>***</sup></td></tr>
<tr><td style="text-align:left"></td><td>(0.270)</td><td>(0.257)</td><td>(0.589)</td><td>(0.342)</td><td>(24.861)</td><td>(28.497)</td><td>(25.259)</td></tr>
<tr><td style="text-align:left"></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td style="text-align:left">english</td><td>-0.122<sup>***</sup></td><td>-0.176<sup>***</sup></td><td></td><td></td><td></td><td></td><td>-0.166<sup>***</sup></td></tr>
<tr><td style="text-align:left"></td><td>(0.033)</td><td>(0.034)</td><td></td><td></td><td></td><td></td><td>(0.034)</td></tr>
<tr><td style="text-align:left"></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td style="text-align:left">I(size2)</td><td></td><td></td><td></td><td></td><td>-3.424<sup>***</sup></td><td>-4.381<sup>***</sup></td><td>-3.466<sup>***</sup></td></tr>
<tr><td style="text-align:left"></td><td></td><td></td><td></td><td></td><td>(1.250)</td><td>(1.441)</td><td>(1.271)</td></tr>
<tr><td style="text-align:left"></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td style="text-align:left">I(size3)</td><td></td><td></td><td></td><td></td><td>0.059<sup>***</sup></td><td>0.075<sup>***</sup></td><td>0.060<sup>***</sup></td></tr>
<tr><td style="text-align:left"></td><td></td><td></td><td></td><td></td><td>(0.021)</td><td>(0.024)</td><td>(0.021)</td></tr>
<tr><td style="text-align:left"></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td style="text-align:left">lunch</td><td>-0.547<sup>***</sup></td><td>-0.398<sup>***</sup></td><td></td><td>-0.411<sup>***</sup></td><td>-0.420<sup>***</sup></td><td>-0.418<sup>***</sup></td><td>-0.402<sup>***</sup></td></tr>
<tr><td style="text-align:left"></td><td>(0.024)</td><td>(0.033)</td><td></td><td>(0.029)</td><td>(0.029)</td><td>(0.029)</td><td>(0.033)</td></tr>
<tr><td style="text-align:left"></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td style="text-align:left">log(income)</td><td></td><td>11.569<sup>***</sup></td><td></td><td>12.124<sup>***</sup></td><td>11.748<sup>***</sup></td><td>11.800<sup>***</sup></td><td>11.509<sup>***</sup></td></tr>
<tr><td style="text-align:left"></td><td></td><td>(1.819)</td><td></td><td>(1.798)</td><td>(1.771)</td><td>(1.778)</td><td>(1.806)</td></tr>
<tr><td style="text-align:left"></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td style="text-align:left">HiEL</td><td></td><td></td><td>5.639</td><td>5.498</td><td>-5.474<sup>***</sup></td><td>816.076<sup>**</sup></td><td></td></tr>
<tr><td style="text-align:left"></td><td></td><td></td><td>(19.515)</td><td>(9.795)</td><td>(1.034)</td><td>(327.674)</td><td></td></tr>
<tr><td style="text-align:left"></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td style="text-align:left">size:HiEL</td><td></td><td></td><td>-1.277</td><td>-0.578</td><td></td><td>-123.282<sup>**</sup></td><td></td></tr>
<tr><td style="text-align:left"></td><td></td><td></td><td>(0.967)</td><td>(0.496)</td><td></td><td>(50.213)</td><td></td></tr>
<tr><td style="text-align:left"></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td style="text-align:left">I(size2):HiEL</td><td></td><td></td><td></td><td></td><td></td><td>6.121<sup>**</sup></td><td></td></tr>
<tr><td style="text-align:left"></td><td></td><td></td><td></td><td></td><td></td><td>(2.542)</td><td></td></tr>
<tr><td style="text-align:left"></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td style="text-align:left">I(size3):HiEL</td><td></td><td></td><td></td><td></td><td></td><td>-0.101<sup>**</sup></td><td></td></tr>
<tr><td style="text-align:left"></td><td></td><td></td><td></td><td></td><td></td><td>(0.043)</td><td></td></tr>
<tr><td style="text-align:left"></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td style="text-align:left">Constant</td><td>700.150<sup>***</sup></td><td>658.552<sup>***</sup></td><td>682.246<sup>***</sup></td><td>653.666<sup>***</sup></td><td>252.050</td><td>122.353</td><td>244.809</td></tr>
<tr><td style="text-align:left"></td><td>(5.568)</td><td>(8.642)</td><td>(11.868)</td><td>(9.869)</td><td>(163.634)</td><td>(185.519)</td><td>(165.722)</td></tr>
<tr><td style="text-align:left"></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td colspan="8" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align:left">Observations</td><td>420</td><td>420</td><td>420</td><td>420</td><td>420</td><td>420</td><td>420</td></tr>
<tr><td style="text-align:left">R<sup>2</sup></td><td>0.775</td><td>0.796</td><td>0.310</td><td>0.797</td><td>0.801</td><td>0.803</td><td>0.801</td></tr>
<tr><td style="text-align:left">Adjusted R<sup>2</sup></td><td>0.773</td><td>0.794</td><td>0.305</td><td>0.795</td><td>0.798</td><td>0.799</td><td>0.798</td></tr>
<tr><td style="text-align:left">Residual Std. Error</td><td>9.080 (df = 416)</td><td>8.643 (df = 415)</td><td>15.880 (df = 416)</td><td>8.629 (df = 414)</td><td>8.559 (df = 413)</td><td>8.547 (df = 410)</td><td>8.568 (df = 413)</td></tr>
<tr><td style="text-align:left">F Statistic</td><td>476.306<sup>***</sup> (df = 3; 416)</td><td>405.359<sup>***</sup> (df = 4; 415)</td><td>62.399<sup>***</sup> (df = 3; 416)</td><td>325.803<sup>***</sup> (df = 5; 414)</td><td>277.212<sup>***</sup> (df = 6; 413)</td><td>185.777<sup>***</sup> (df = 9; 410)</td><td>276.515<sup>***</sup> (df = 6; 413)</td></tr>
<tr><td colspan="8" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align:left"><em>Note:</em></td><td colspan="7" style="text-align:right"><sup>*</sup>p<0.1; <sup>**</sup>p<0.05; <sup>***</sup>p<0.01</td></tr>
</table>
<caption><p style='text-align:center'><span id="tab:nmots">Table 8.2: </span> Nonlinear Models of Test Scores</p></caption>


<p>Let us summarize what can be concluded from the results presented in Table <a href="8-4-nonlinear-effects-on-test-scores-of-the-student-teacher-ratio.html#tab:nmots">8.2</a>.</p>
<p>First of all, the coefficient on <span class="math inline">\(size\)</span> is statistically significant in all seven models. Adding <span class="math inline">\(\ln(income)\)</span> to model (1) we find that the corresponding coefficient is statistically significant at <span class="math inline">\(1\%\)</span> while all other coefficients remain at their significance level. Furthermore, the estimate for the coefficient on <span class="math inline">\(size\)</span> is roughly <span class="math inline">\(0.27\)</span> points larger, which may be a sign of attenuated omitted variable bias. We consider this a reason to include <span class="math inline">\(\ln(income)\)</span> as a regressor in other models, too.</p>
<p>Regressions (3) and (4) aim to assess the effect of allowing for an interaction between <span class="math inline">\(size\)</span> and <span class="math inline">\(HiEL\)</span>, without and with economic control variables. In both models, both the coefficient on the interaction term and the coefficient on the dummy are not statistically significant. Thus, even with economic controls we cannot reject the null hypotheses, that the effect of the student-teacher ratio on test scores is the same for districts with high and districts with low share of English learning students.</p>
<p>Regression (5) includes a cubic term for the student-teacher ratio and omits the interaction between <span class="math inline">\(size\)</span> and <span class="math inline">\(HiEl\)</span>. The results indicate that there is a nonlinear effect of the student-teacher ratio on test scores (Can you verify this using an <span class="math inline">\(F\)</span>-test of <span class="math inline">\(H_0: \beta_2=\beta_3=0\)</span>?)</p>
<p>Consequently, regression (6) further explores whether the fraction of English learners impacts the student-teacher ratio by using <span class="math inline">\(HiEL \times size\)</span> and the interactions <span class="math inline">\(HiEL \times size^2\)</span> and <span class="math inline">\(HiEL \times size^3\)</span>. All individual <span class="math inline">\(t\)</span>-tests indicate that that there are significant effects. We check this using a robust <span class="math inline">\(F\)</span>-test of <span class="math inline">\(H_0: \beta_6=\beta_7=\beta_8=0\)</span>.</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb210-1" data-line-number="1"><span class="co"># check joint significance of the interaction terms</span></a>
<a class="sourceLine" id="cb210-2" data-line-number="2"><span class="kw">linearHypothesis</span>(TestScore_mod6, </a>
<a class="sourceLine" id="cb210-3" data-line-number="3">                 <span class="kw">c</span>(<span class="st">&quot;size:HiEL=0&quot;</span>, <span class="st">&quot;I(size^2):HiEL=0&quot;</span>, <span class="st">&quot;I(size^3):HiEL=0&quot;</span>),</a>
<a class="sourceLine" id="cb210-4" data-line-number="4">                 <span class="dt">vcov. =</span> vcovHC, <span class="dt">type =</span> <span class="st">&quot;HC1&quot;</span>)</a>
<a class="sourceLine" id="cb210-5" data-line-number="5"><span class="co">#&gt; Linear hypothesis test</span></a>
<a class="sourceLine" id="cb210-6" data-line-number="6"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb210-7" data-line-number="7"><span class="co">#&gt; Hypothesis:</span></a>
<a class="sourceLine" id="cb210-8" data-line-number="8"><span class="co">#&gt; size:HiEL = 0</span></a>
<a class="sourceLine" id="cb210-9" data-line-number="9"><span class="co">#&gt; I(size^2):HiEL = 0</span></a>
<a class="sourceLine" id="cb210-10" data-line-number="10"><span class="co">#&gt; I(size^3):HiEL = 0</span></a>
<a class="sourceLine" id="cb210-11" data-line-number="11"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb210-12" data-line-number="12"><span class="co">#&gt; Model 1: restricted model</span></a>
<a class="sourceLine" id="cb210-13" data-line-number="13"><span class="co">#&gt; Model 2: score ~ size + I(size^2) + I(size^3) + HiEL + HiEL:size + HiEL:I(size^2) + </span></a>
<a class="sourceLine" id="cb210-14" data-line-number="14"><span class="co">#&gt;     HiEL:I(size^3) + lunch + log(income)</span></a>
<a class="sourceLine" id="cb210-15" data-line-number="15"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb210-16" data-line-number="16"><span class="co">#&gt; Note: Coefficient covariance matrix supplied.</span></a>
<a class="sourceLine" id="cb210-17" data-line-number="17"><span class="co">#&gt; </span></a>
<a class="sourceLine" id="cb210-18" data-line-number="18"><span class="co">#&gt;   Res.Df Df      F  Pr(&gt;F)  </span></a>
<a class="sourceLine" id="cb210-19" data-line-number="19"><span class="co">#&gt; 1    413                    </span></a>
<a class="sourceLine" id="cb210-20" data-line-number="20"><span class="co">#&gt; 2    410  3 2.1885 0.08882 .</span></a>
<a class="sourceLine" id="cb210-21" data-line-number="21"><span class="co">#&gt; ---</span></a>
<a class="sourceLine" id="cb210-22" data-line-number="22"><span class="co">#&gt; Signif. codes:  0 &#39;***&#39; 0.001 &#39;**&#39; 0.01 &#39;*&#39; 0.05 &#39;.&#39; 0.1 &#39; &#39; 1</span></a></code></pre></div>
<p>We find that the null can be rejected at the level of <span class="math inline">\(5\%\)</span> and conclude that the regression function differs for districts with high and low percentage of English learners.</p>
<p>Specification (7) uses a continuous measure for the share of English learners instead of a dummy variable (and thus does not include interaction terms). We observe only small changes to the coefficient estimates on the other regressors and thus conclude that the results observed for specification (5) are not sensitive to the way the percentage of English learners is measured.</p>
<p>We continue by reproducing Figure 8.10 of the book for interpretation of the nonlinear specifications (2), (5) and (7).</p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb211-1" data-line-number="1"><span class="co"># scatterplot</span></a>
<a class="sourceLine" id="cb211-2" data-line-number="2"><span class="kw">plot</span>(CASchools<span class="op">$</span>size, </a>
<a class="sourceLine" id="cb211-3" data-line-number="3">     CASchools<span class="op">$</span>score, </a>
<a class="sourceLine" id="cb211-4" data-line-number="4">     <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="dv">12</span>, <span class="dv">28</span>),</a>
<a class="sourceLine" id="cb211-5" data-line-number="5">     <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="dv">600</span>, <span class="dv">740</span>),</a>
<a class="sourceLine" id="cb211-6" data-line-number="6">     <span class="dt">pch =</span> <span class="dv">20</span>, </a>
<a class="sourceLine" id="cb211-7" data-line-number="7">     <span class="dt">col =</span> <span class="st">&quot;gray&quot;</span>, </a>
<a class="sourceLine" id="cb211-8" data-line-number="8">     <span class="dt">xlab =</span> <span class="st">&quot;Student-Teacher Ratio&quot;</span>, </a>
<a class="sourceLine" id="cb211-9" data-line-number="9">     <span class="dt">ylab =</span> <span class="st">&quot;Test Score&quot;</span>)</a>
<a class="sourceLine" id="cb211-10" data-line-number="10"></a>
<a class="sourceLine" id="cb211-11" data-line-number="11"><span class="co"># add a legend</span></a>
<a class="sourceLine" id="cb211-12" data-line-number="12"><span class="kw">legend</span>(<span class="st">&quot;top&quot;</span>, </a>
<a class="sourceLine" id="cb211-13" data-line-number="13">       <span class="dt">legend =</span> <span class="kw">c</span>(<span class="st">&quot;Linear Regression (2)&quot;</span>, </a>
<a class="sourceLine" id="cb211-14" data-line-number="14">                  <span class="st">&quot;Cubic Regression (5)&quot;</span>, </a>
<a class="sourceLine" id="cb211-15" data-line-number="15">                  <span class="st">&quot;Cubic Regression (7)&quot;</span>),</a>
<a class="sourceLine" id="cb211-16" data-line-number="16">       <span class="dt">cex =</span> <span class="fl">0.8</span>,</a>
<a class="sourceLine" id="cb211-17" data-line-number="17">       <span class="dt">ncol =</span> <span class="dv">3</span>,</a>
<a class="sourceLine" id="cb211-18" data-line-number="18">       <span class="dt">lty =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">2</span>),</a>
<a class="sourceLine" id="cb211-19" data-line-number="19">       <span class="dt">col =</span> <span class="kw">c</span>(<span class="st">&quot;blue&quot;</span>, <span class="st">&quot;red&quot;</span>, <span class="st">&quot;black&quot;</span>))</a>
<a class="sourceLine" id="cb211-20" data-line-number="20"></a>
<a class="sourceLine" id="cb211-21" data-line-number="21"><span class="co"># data for use with predict()</span></a>
<a class="sourceLine" id="cb211-22" data-line-number="22">new_data &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="st">&quot;size&quot;</span> =<span class="st"> </span><span class="kw">seq</span>(<span class="dv">16</span>, <span class="dv">24</span>, <span class="fl">0.05</span>), </a>
<a class="sourceLine" id="cb211-23" data-line-number="23">                       <span class="st">&quot;english&quot;</span> =<span class="st"> </span><span class="kw">mean</span>(CASchools<span class="op">$</span>english),</a>
<a class="sourceLine" id="cb211-24" data-line-number="24">                       <span class="st">&quot;lunch&quot;</span> =<span class="st"> </span><span class="kw">mean</span>(CASchools<span class="op">$</span>lunch),</a>
<a class="sourceLine" id="cb211-25" data-line-number="25">                       <span class="st">&quot;income&quot;</span> =<span class="st"> </span><span class="kw">mean</span>(CASchools<span class="op">$</span>income),</a>
<a class="sourceLine" id="cb211-26" data-line-number="26">                       <span class="st">&quot;HiEL&quot;</span> =<span class="st"> </span><span class="kw">mean</span>(CASchools<span class="op">$</span>HiEL))</a>
<a class="sourceLine" id="cb211-27" data-line-number="27"></a>
<a class="sourceLine" id="cb211-28" data-line-number="28"><span class="co"># add estimated regression function for model (2)</span></a>
<a class="sourceLine" id="cb211-29" data-line-number="29">fitted &lt;-<span class="st"> </span><span class="kw">predict</span>(TestScore_mod2, <span class="dt">newdata =</span> new_data)</a>
<a class="sourceLine" id="cb211-30" data-line-number="30"></a>
<a class="sourceLine" id="cb211-31" data-line-number="31"><span class="kw">lines</span>(new_data<span class="op">$</span>size, </a>
<a class="sourceLine" id="cb211-32" data-line-number="32">      fitted,</a>
<a class="sourceLine" id="cb211-33" data-line-number="33">      <span class="dt">lwd =</span> <span class="fl">1.5</span>,</a>
<a class="sourceLine" id="cb211-34" data-line-number="34">      <span class="dt">col =</span> <span class="st">&quot;blue&quot;</span>)</a>
<a class="sourceLine" id="cb211-35" data-line-number="35"></a>
<a class="sourceLine" id="cb211-36" data-line-number="36"><span class="co"># add estimated regression function for model (5)</span></a>
<a class="sourceLine" id="cb211-37" data-line-number="37">fitted &lt;-<span class="st"> </span><span class="kw">predict</span>(TestScore_mod5, <span class="dt">newdata =</span> new_data)</a>
<a class="sourceLine" id="cb211-38" data-line-number="38"></a>
<a class="sourceLine" id="cb211-39" data-line-number="39"><span class="kw">lines</span>(new_data<span class="op">$</span>size, </a>
<a class="sourceLine" id="cb211-40" data-line-number="40">      fitted, </a>
<a class="sourceLine" id="cb211-41" data-line-number="41">      <span class="dt">lwd =</span> <span class="fl">1.5</span>,</a>
<a class="sourceLine" id="cb211-42" data-line-number="42">      <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>)</a>
<a class="sourceLine" id="cb211-43" data-line-number="43"></a>
<a class="sourceLine" id="cb211-44" data-line-number="44"><span class="co"># add estimated regression function for model (7)</span></a>
<a class="sourceLine" id="cb211-45" data-line-number="45">fitted &lt;-<span class="st"> </span><span class="kw">predict</span>(TestScore_mod7, <span class="dt">newdata =</span> new_data)</a>
<a class="sourceLine" id="cb211-46" data-line-number="46"></a>
<a class="sourceLine" id="cb211-47" data-line-number="47"><span class="kw">lines</span>(new_data<span class="op">$</span>size, </a>
<a class="sourceLine" id="cb211-48" data-line-number="48">      fitted, </a>
<a class="sourceLine" id="cb211-49" data-line-number="49">      <span class="dt">col =</span> <span class="st">&quot;black&quot;</span>,</a>
<a class="sourceLine" id="cb211-50" data-line-number="50">      <span class="dt">lwd =</span> <span class="fl">1.5</span>,</a>
<a class="sourceLine" id="cb211-51" data-line-number="51">      <span class="dt">lty =</span> <span class="dv">2</span>)</a></code></pre></div>
<p><img src="AdvRA_files/figure-html/unnamed-chunk-359-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>For the above figure all regressors except <span class="math inline">\(size\)</span> are set to their sample averages. We see that the cubic regressions (5) and (7) are almost identical. They indicate that the relation between test scores and the student-teacher ratio only has a small amount of nonlinearity since they do not deviate much from the regression function of (2).</p>
<p>The next code chunk reproduces Figure 8.11 of the book. We use <tt>plot()</tt> and <tt>points()</tt> to color observations depending on <span class="math inline">\(HiEL\)</span>. Again, the regression lines are drawn based on predictions using average sample averages of all regressors except for <span class="math inline">\(size\)</span>.</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb212-1" data-line-number="1"><span class="co"># draw scatterplot</span></a>
<a class="sourceLine" id="cb212-2" data-line-number="2"></a>
<a class="sourceLine" id="cb212-3" data-line-number="3"><span class="co"># observations with HiEL = 0</span></a>
<a class="sourceLine" id="cb212-4" data-line-number="4"><span class="kw">plot</span>(CASchools<span class="op">$</span>size[CASchools<span class="op">$</span>HiEL <span class="op">==</span><span class="st"> </span><span class="dv">0</span>], </a>
<a class="sourceLine" id="cb212-5" data-line-number="5">     CASchools<span class="op">$</span>score[CASchools<span class="op">$</span>HiEL <span class="op">==</span><span class="st"> </span><span class="dv">0</span>], </a>
<a class="sourceLine" id="cb212-6" data-line-number="6">     <span class="dt">xlim =</span> <span class="kw">c</span>(<span class="dv">12</span>, <span class="dv">28</span>),</a>
<a class="sourceLine" id="cb212-7" data-line-number="7">     <span class="dt">ylim =</span> <span class="kw">c</span>(<span class="dv">600</span>, <span class="dv">730</span>),</a>
<a class="sourceLine" id="cb212-8" data-line-number="8">     <span class="dt">pch =</span> <span class="dv">20</span>, </a>
<a class="sourceLine" id="cb212-9" data-line-number="9">     <span class="dt">col =</span> <span class="st">&quot;gray&quot;</span>, </a>
<a class="sourceLine" id="cb212-10" data-line-number="10">     <span class="dt">xlab =</span> <span class="st">&quot;Student-Teacher Ratio&quot;</span>, </a>
<a class="sourceLine" id="cb212-11" data-line-number="11">     <span class="dt">ylab =</span> <span class="st">&quot;Test Score&quot;</span>)</a>
<a class="sourceLine" id="cb212-12" data-line-number="12"></a>
<a class="sourceLine" id="cb212-13" data-line-number="13"><span class="co"># observations with HiEL = 1</span></a>
<a class="sourceLine" id="cb212-14" data-line-number="14"><span class="kw">points</span>(CASchools<span class="op">$</span>size[CASchools<span class="op">$</span>HiEL <span class="op">==</span><span class="st"> </span><span class="dv">1</span>], </a>
<a class="sourceLine" id="cb212-15" data-line-number="15">       CASchools<span class="op">$</span>score[CASchools<span class="op">$</span>HiEL <span class="op">==</span><span class="st"> </span><span class="dv">1</span>],</a>
<a class="sourceLine" id="cb212-16" data-line-number="16">       <span class="dt">col =</span> <span class="st">&quot;steelblue&quot;</span>,</a>
<a class="sourceLine" id="cb212-17" data-line-number="17">       <span class="dt">pch =</span> <span class="dv">20</span>)</a>
<a class="sourceLine" id="cb212-18" data-line-number="18"></a>
<a class="sourceLine" id="cb212-19" data-line-number="19"><span class="co"># add a legend</span></a>
<a class="sourceLine" id="cb212-20" data-line-number="20"><span class="kw">legend</span>(<span class="st">&quot;top&quot;</span>, </a>
<a class="sourceLine" id="cb212-21" data-line-number="21">       <span class="dt">legend =</span> <span class="kw">c</span>(<span class="st">&quot;Regression (6) with HiEL=0&quot;</span>, <span class="st">&quot;Regression (6) with HiEL=1&quot;</span>),</a>
<a class="sourceLine" id="cb212-22" data-line-number="22">       <span class="dt">cex =</span> <span class="fl">0.7</span>,</a>
<a class="sourceLine" id="cb212-23" data-line-number="23">       <span class="dt">ncol =</span> <span class="dv">2</span>,</a>
<a class="sourceLine" id="cb212-24" data-line-number="24">       <span class="dt">lty =</span> <span class="kw">c</span>(<span class="dv">1</span>, <span class="dv">1</span>),</a>
<a class="sourceLine" id="cb212-25" data-line-number="25">       <span class="dt">col =</span> <span class="kw">c</span>(<span class="st">&quot;green&quot;</span>, <span class="st">&quot;red&quot;</span>))</a>
<a class="sourceLine" id="cb212-26" data-line-number="26"></a>
<a class="sourceLine" id="cb212-27" data-line-number="27"><span class="co"># data for use with &#39;predict()&#39;</span></a>
<a class="sourceLine" id="cb212-28" data-line-number="28">new_data &lt;-<span class="st"> </span><span class="kw">data.frame</span>(<span class="st">&quot;size&quot;</span> =<span class="st"> </span><span class="kw">seq</span>(<span class="dv">12</span>, <span class="dv">28</span>, <span class="fl">0.05</span>), </a>
<a class="sourceLine" id="cb212-29" data-line-number="29">                       <span class="st">&quot;english&quot;</span> =<span class="st"> </span><span class="kw">mean</span>(CASchools<span class="op">$</span>english),</a>
<a class="sourceLine" id="cb212-30" data-line-number="30">                       <span class="st">&quot;lunch&quot;</span> =<span class="st"> </span><span class="kw">mean</span>(CASchools<span class="op">$</span>lunch),</a>
<a class="sourceLine" id="cb212-31" data-line-number="31">                       <span class="st">&quot;income&quot;</span> =<span class="st"> </span><span class="kw">mean</span>(CASchools<span class="op">$</span>income),</a>
<a class="sourceLine" id="cb212-32" data-line-number="32">                       <span class="st">&quot;HiEL&quot;</span> =<span class="st"> </span><span class="dv">0</span>)</a>
<a class="sourceLine" id="cb212-33" data-line-number="33"></a>
<a class="sourceLine" id="cb212-34" data-line-number="34"><span class="co"># add estimated regression function for model (6) with HiEL=0</span></a>
<a class="sourceLine" id="cb212-35" data-line-number="35">fitted &lt;-<span class="st"> </span><span class="kw">predict</span>(TestScore_mod6, <span class="dt">newdata =</span> new_data)</a>
<a class="sourceLine" id="cb212-36" data-line-number="36"></a>
<a class="sourceLine" id="cb212-37" data-line-number="37"><span class="kw">lines</span>(new_data<span class="op">$</span>size, </a>
<a class="sourceLine" id="cb212-38" data-line-number="38">      fitted, </a>
<a class="sourceLine" id="cb212-39" data-line-number="39">      <span class="dt">lwd =</span> <span class="fl">1.5</span>,</a>
<a class="sourceLine" id="cb212-40" data-line-number="40">      <span class="dt">col =</span> <span class="st">&quot;green&quot;</span>)</a>
<a class="sourceLine" id="cb212-41" data-line-number="41"></a>
<a class="sourceLine" id="cb212-42" data-line-number="42"><span class="co"># add estimated regression function for model (6) with HiEL=1</span></a>
<a class="sourceLine" id="cb212-43" data-line-number="43">new_data<span class="op">$</span>HiEL &lt;-<span class="st"> </span><span class="dv">1</span></a>
<a class="sourceLine" id="cb212-44" data-line-number="44"></a>
<a class="sourceLine" id="cb212-45" data-line-number="45">fitted &lt;-<span class="st"> </span><span class="kw">predict</span>(TestScore_mod6, <span class="dt">newdata =</span> new_data)</a>
<a class="sourceLine" id="cb212-46" data-line-number="46"></a>
<a class="sourceLine" id="cb212-47" data-line-number="47"><span class="kw">lines</span>(new_data<span class="op">$</span>size, </a>
<a class="sourceLine" id="cb212-48" data-line-number="48">      fitted, </a>
<a class="sourceLine" id="cb212-49" data-line-number="49">      <span class="dt">lwd =</span> <span class="fl">1.5</span>,</a>
<a class="sourceLine" id="cb212-50" data-line-number="50">      <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>)</a></code></pre></div>
<p><img src="AdvRA_files/figure-html/unnamed-chunk-360-1.png" width="80%" style="display: block; margin: auto;" /></p>
<p>The regression output shows that model (6) finds statistically significant coefficients on the interaction terms <span class="math inline">\(HiEL:size\)</span>, <span class="math inline">\(HiEL:size^2\)</span> and <span class="math inline">\(HiEL:size^3\)</span>, i.e., there is evidence that the nonlinear relationship connecting test scores and student-teacher ratio depends on the fraction of English learning students in the district. However, the above figure shows that this difference is not of practical importance and is a good example for why one should be careful when interpreting nonlinear models: although the two regression functions look different, we see that the slope of both functions is almost identical for student-teacher ratios between <span class="math inline">\(17\)</span> and <span class="math inline">\(23\)</span>. Since this range includes almost <span class="math inline">\(90\%\)</span> of all observations, we can be confident that nonlinear interactions between the fraction of English learners and the student-teacher ratio can be neglected.</p>
<p>One might be tempted to object since both functions show opposing slopes for student-teacher ratios below <span class="math inline">\(15\)</span> and beyond <span class="math inline">\(24\)</span>. There are at least to possible objections:</p>
<ol style="list-style-type: decimal">
<li><p>There are only few observations with low and high values of the student-teacher ratio, so there is only little information to be exploited when estimating the model. This means the estimated function is less precise in the tails of the data set.</p></li>
<li><p>The above described behavior of the regression function, is a typical caveat when using cubic functions since they generally show extreme behavior for extreme regressor values. Think of the graph of <span class="math inline">\(f(x) = x^3\)</span>.</p></li>
</ol>
<p>We thus find no clear evidence for a relation between class size and test scores on the percentage of English learners in the district.</p>
</div>
<div id="summary" class="section level4 unnumbered">
<h4>Summary</h4>
<p>We are now able to answer the three question posed at the beginning of this section.</p>
<ol style="list-style-type: decimal">
<li><p>In the linear models, the percentage of English learners has only little influence on the effect on test scores from changing the student-teacher ratio. This result stays valid if we control for economic background of the students. While the cubic specification (6) provides evidence that the effect the student-teacher ratio on test score depends on the share of English learners, the strength of this effect is negligible.</p></li>
<li><p>When controlling for the students’ economic background we find evidence of nonlinearities in the relationship between student-teacher ratio and test scores.</p></li>
<li><p>The linear specification (2) predicts that a reduction of the student-teacher ratio by two students per teacher leads to an improvement in test scores of about <span class="math inline">\(-0.73 \times (-2) = 1.46\)</span> points. Since the model is linear, this effect is independent of the class size. Assume that the student-teacher ratio is <span class="math inline">\(20\)</span>. For example, the nonlinear model (5) predicts that the reduction increases test scores by <span class="math display">\[64.33\cdot18+18^2\cdot(-3.42)+18^3\cdot(0.059) - (64.33\cdot20+20^2\cdot(-3.42)+20^3\cdot(0.059)) \approx 3.3\]</span> points. If the ratio is <span class="math inline">\(22\)</span>, a reduction to <span class="math inline">\(20\)</span> leads to a predicted improvement in test scores of <span class="math display">\[64.33\cdot20+20^2\cdot(-3.42)+20^3\cdot(0.059) - (64.33\cdot22+22^2\cdot(-3.42)+22^3\cdot(0.059)) \approx 2.4\]</span> points. This suggests that the effect is stronger in smaller classes.</p></li>
</ol>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="8-3-interactions-between-independent-variables.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="8-5-exercises-8.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 2
},
"edit": {
"link": "https://github.com/lidom/AdvRA/edit/master/08-ch8.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection",
"scroll_highlight": true
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
